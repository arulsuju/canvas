!function(e){function t(t){for(var o,s,a=t[0],p=t[1],c=t[2],l=0,d=[];l<a.length;l++)s=a[l],r[s]&&d.push(r[s][0]),r[s]=0;for(o in p)Object.prototype.hasOwnProperty.call(p,o)&&(e[o]=p[o]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var p=n[a];0!==r[p]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={6:0},i=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/Panopto/Scripts/Panopto/Bundles/";var a=window.webpackJsonp=window.webpackJsonp||[],p=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=p;i.push([315,0]),n()}({1:function(e,t){e.exports=_},160:function(e,t,n){var o=n(161);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(3)(o,r);o.locals&&(e.exports=o.locals)},161:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".react-loading-spinner-small {\n  animation: rotate 1s linear infinite;\n  width: 36px;\n  height: 36px;\n}\n@keyframes rotate {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.react-loading-spinner-small svg {\n  display: inline-block;\n}\n",""])},162:function(e,t,n){var o=n(163);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(3)(o,r);o.locals&&(e.exports=o.locals)},163:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,'.rating-star::before {\n  content: "star_border";\n}\n.rating-star.filled::before {\n  content: "star";\n}\n',""])},164:function(e,t,n){var o=n(165);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(3)(o,r);o.locals&&(e.exports=o.locals)},165:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".rating-selector {\n  display: flex;\n}\n.rating-selector.active {\n  color: white;\n}\n",""])},315:function(e,t,n){"use strict";n.r(t);var o,r=n(30),i=n(0),s=n(1),a=n(33),p=n(5),c=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMenuButtonActivate=function(e){var t=e.type;n.setState({open:!0},function(){return n.focusMenu({keyboardInitiated:"click"!==t})})},n.focusMenu=function(e){var t=e.keyboardInitiated,o=void 0!==t&&t,r=$(n.menuElement).find(":tabbable").first();r.focus(),o||r.addClass("clicked").one("blur",function(){return r.removeClass("clicked")})},n.handleMenuBlur=function(){n.blurTimeoutId=window.setTimeout(function(){n.setState({open:!1})})},n.handleMenuFocus=function(){window.clearTimeout(n.blurTimeoutId)},n.handleMenuKeyDown=function(e){"Escape"===e.key&&(n.setState({open:!1},function(){return n.buttonElement.focus()}),e.preventDefault(),e.stopPropagation())},n.state={open:!1},n}return c(t,e),t.prototype.render=function(){var e=this;return i.createElement(i.Fragment,null,i.createElement(p.a,{className:"button",title:this.props.title,isMenuButton:!0,isMenuOpen:this.state.open,iconCode:"more_vert",onActivate:this.handleMenuButtonActivate,innerRef:function(t){return e.buttonElement=t}}),this.state.open&&i.createElement("div",{className:"action-menu",role:"menu","aria-label":this.props.title,ref:function(t){return e.menuElement=t},onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeyDown:this.handleMenuKeyDown},this.props.children))},t}(i.Component),l=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(){return(d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},h=i.createContext({}),m=h.Provider;function f(e){return function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.displayName="withContainer("+e.displayName+")",n}return l(n,t),n.prototype.render=function(){var t=this;return i.createElement(h.Consumer,null,function(n){return i.createElement(e,d({},t.props,n))})},n}(i.Component)}var y,v=function(){function e(){}return e.parseThreads=function(e){var t=[];return s.each(e,function(e){if(t.length&&e.time===s.last(t).comment.time)s.last(t).replies.push(e);else{var n={comment:e,replies:[],isExpanded:!1};t.push(n)}}),t},e.addComment=function(e,t){var n=s.find(e,function(e){return e.comment.time===t.time});if(n)n.replies.push(t),n.isExpanded=!0;else{var o={comment:t,replies:[],isExpanded:!1},r=s.sortedIndex(e,o,function(e){return e.comment.time});e.splice(r,0,o)}},e.findCommentById=function(e,t){var n;return s.find(e,function(e){return n=e.comment.id===t?e.comment:s.findWhere(e.replies,{id:t}),Boolean(n)}),n},e.removeCommentById=function(e,t){var n=!1;return s.find(e,function(o,r){if(o.comment.id===t)o.replies.length?o.comment=o.replies.splice(0,1)[0]:e.splice(r,1),n=!0;else{var i=s.findIndex(o.replies,{id:t});i>-1&&(o.replies=o.replies.slice(),o.replies.splice(i,1),n=!0)}return n}),n},e}(),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w=PanoptoTS.Viewer.Data.Event,E=f(function(e){function t(t){var n=e.call(this,t)||this;return n.eventType=a.EventType.Comment,n.handleInputChange=function(e){e&&!n.lastInputText&&n.setState({inputTime:n.props.currentTime}),!e&&n.lastInputText&&n.setState({inputTime:void 0}),n.setState({inputText:e}),n.lastInputText=e},n.handleInputSubmit=function(){var e=n.addComment();n.props.deliveryService.createEvent(n.props.deliveryId,n.eventType,e.text,e.time,!0,void 0,n.props.isBroadcast,function(t){n.confirmCommentAdd(e.id,t)},function(){n.removeCommentById(e.id)})},n.handleDeleteComment=function(e){n.updateCommentById(e.id,function(e){return e.saved=!1}),n.props.deliveryService.deleteEvent(n.props.deliveryId,n.eventType,e.eventPublicId,function(){n.removeCommentById(e.id)},function(){alert(n.props.resources.Embed_CommentDeleteFailed),n.updateCommentById(e.id,function(e){return e.saved=!0})})},n.handleSetThreadExpanded=function(e,t){var o=n.state.threads.slice(),r=s.findIndex(o,function(t){return t.comment.id===e.comment.id}),i=_({},e,{isExpanded:t});o.splice(r,1,i),n.setState({threads:o})},n.handleReply=function(e){n.setState({replyingTo:e})},n.state={threads:[],isLoading:!1,replyingTo:void 0,addedComment:void 0,inputText:"",inputTime:void 0},n}return b(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({isLoading:!0}),this.props.deliveryService.search(this.props.deliveryId,this.eventType,void 0,void 0,void 0,void 0,void 0,function(t){var n=t.map(function(e){return new w(e)});e.setState({threads:v.parseThreads(n),isLoading:!1})},$.noop)},t.prototype.addComment=function(){var e=this.state.replyingTo?this.state.replyingTo.time:this.state.inputTime,t={id:"temp-event"+Math.round(1e8*Math.random()).toString(),type:this.eventType,text:this.state.inputText,time:e,user:Panopto.user.userKey,userDisplayName:this.props.userName,saved:!1},n=this.state.threads.slice();return v.addComment(n,t),this.setState({threads:n,replyingTo:void 0,addedComment:t,inputText:"",inputTime:void 0}),this.lastInputText="",t},t.prototype.confirmCommentAdd=function(e,t){var n=this;this.updateCommentById(e,function(e){e.id=t.EventID.toString(),e.eventPublicId=t.PublicId.toString(),e.creationTime=n.props.timeHelpers.dateToWin32EpochTime(moment(t.CreationDateTime).toDate()),e.saved=!0})},t.prototype.updateCommentById=function(e,t){var n=v.findCommentById(this.state.threads,e);n&&(t(n),this.setState({threads:this.state.threads.slice()}))},t.prototype.removeCommentById=function(e){var t=this.state.threads.slice();v.removeCommentById(t,e)&&this.setState({threads:t})},t.prototype.render=function(){var e=this.state.replyingTo?this.state.replyingTo.time:void 0!==this.state.inputTime?this.state.inputTime:this.props.currentTime;return this.props.render(this.state.threads,this.state.isLoading,e,this.state.inputText,this.state.replyingTo,this.state.addedComment,this.handleInputChange,this.handleInputSubmit,this.handleSetThreadExpanded,this.handleReply,this.handleDeleteComment)},t}(i.Component)),C=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleFocus=function(e){var t=$(e.currentTarget),n=$(e.target).closest("[role=listitem]");t.find(":tabbable").attr("tabindex",-1),n.attr("tabindex",0),n.find("[tabindex=-1]").attr("tabindex",0)},t.handleKeyDown=function(e){if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&!(e.ctrlKey||e.altKey||e.shiftKey)){var t=$(e.currentTarget).find("[role=listitem]"),n=$(e.target).closest("[role=listitem]"),o=t.index(n),r="ArrowUp"===e.key?-1:1;if(-1!==o){var i=(o+r)%t.length;t.eq(i).focus(),e.preventDefault(),e.stopPropagation()}}},t}return C(t,e),t.prototype.render=function(){return i.createElement("ul",{className:this.props.className,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown},this.props.children)},t}(i.Component),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=f(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.render=function(){var e;return e=this.props.isLoading?this.props.resources.Embed_Loading:this.props.children.length?this.props.children:i.createElement("div",{className:"empty-list-message"},this.props.emptyListText||this.props.resources.Embed_NoItems),i.createElement(g,{className:"event-list"},e)},t}(i.Component)),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t.prototype.render=function(){var e=["event-pane"];return this.props.className&&e.push(this.props.className),this.props.selected&&e.push("selected"),i.createElement("div",{id:this.props.id,role:"tabpanel","aria-labelledby":this.props.tabId,className:e.join(" ")},this.props.children)},t}(i.Component),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=f(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteActionItemClick=function(){t.props.onDelete(),t.setState({actionMenuOpen:!1})},t}return N(t,e),t.prototype.componentDidMount=function(){this.props.scrollIntoView&&this.element.scrollIntoView(!1)},t.prototype.componentDidUpdate=function(e){this.props.scrollIntoView&&!e.scrollIntoView&&this.element.scrollIntoView(!1)},t.prototype.render=function(){var e=this,t=["content-row","comment-row"];!this.props.comment.saved&&t.push("temp-event");var n=this.props.resources.Embed_Now;if(this.props.comment.creationTime){var o=this.props.timeHelpers.formatWin32EpochTimeToDate(this.props.comment.creationTime);n=moment(o).fromNow()}var r=Panopto.user.isAdmin||Panopto.user.userKey===this.props.comment.user;return i.createElement(p.a,{className:t.join(" "),role:"listitem",innerRef:function(t){return e.element=t},onActivate:this.props.onClick},i.createElement("div",{className:"user-time-row"},i.createElement("div",{className:"user-name ellipsis"},this.props.comment.userDisplayName),!this.props.isReply&&i.createElement("div",{className:"content-row-time"},this.props.timeHelpers.formatDuration(Math.floor(this.props.comment.time),":",!1,0)),i.createElement("div",{className:"action-menu-wrapper"},r&&i.createElement(u,{title:this.props.resources.Embed_MoreActions},i.createElement(p.a,{role:"menuitem",className:"item",onActivate:this.handleDeleteActionItemClick},i.createElement("i",{className:"material-icons","aria-hidden":"true"},"delete"),this.props.resources.Delete)))),i.createElement("div",{className:"comment-text"},this.props.comment.text),i.createElement("div",{className:"date-actions-row"},i.createElement("div",{className:"date"},n),this.props.isAuthenticated&&i.createElement(p.a,{className:"reply-button",onActivate:function(){return e.props.onReply(e.props.comment)}},this.props.resources.Embed_Reply)))},t}(i.Component)),x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),R=f(function(e){function t(t){var n=e.call(this,t)||this;return n.isCommentToScroll=function(e){return n.props.addedComment&&e.id===n.props.addedComment.id||n.props.replyingTo&&e.id===n.props.replyingTo.id},n.state={expandReplies:!1},n}return x(t,e),t.prototype.render=function(){var e=this,t=this.props.thread.replies,n=t.length>0,o=this.props.thread.isExpanded?this.props.resources.Embed_HideReplies:t.length>1?this.props.stringHelpers.format(this.props.resources.Embed_ShowMultipleReplies,t.length):this.props.resources.Embed_ShowOneReply;return i.createElement("div",{className:["thread"].join(" ")},i.createElement(O,{comment:this.props.thread.comment,isReply:!1,isAuthenticated:this.props.isAuthenticated,scrollIntoView:this.isCommentToScroll(this.props.thread.comment),onClick:function(){return e.props.onClick(e.props.thread.comment)},onDelete:function(){return e.props.onDelete(e.props.thread.comment)},onReply:this.props.onReply}),n&&i.createElement(p.a,{className:"reply-toggle",onActivate:function(){return e.props.onSetExpanded(!e.props.thread.isExpanded)}},i.createElement("i",{className:"material-icons","aria-hidden":"true"},this.props.thread.isExpanded?"arrow_drop_down":"arrow_right"),i.createElement("span",null,o)),n&&this.props.thread.isExpanded&&i.createElement("div",{className:"reply-container",role:"list"},this.props.thread.replies.map(function(t){return i.createElement(O,{key:t.id,comment:t,isReply:!0,isAuthenticated:e.props.isAuthenticated,scrollIntoView:e.isCommentToScroll(t),onClick:function(){return e.props.onClick(t)},onDelete:function(){return e.props.onDelete(t)},onReply:e.props.onReply})})))},t}(i.Component)),D=function(){function e(){}return e.setEmbedViewport=function(e){var t=e.fixed;$.browser.android&&($.browser.chrome||$.browser.mozilla)&&($("html, form").css("overflow",t?"hidden":"visible"),$("body").css("overflow",t?"hidden":"auto"),$("#embed").css({position:t?"fixed":"relative",height:t?"100%":window.innerHeight+"px"}))},e}(),k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),j=f(function(e){function t(t){var n=e.call(this,t)||this;n.handleInputFocus=function(){D.setEmbedViewport({fixed:!1}),$(window).on("resize.inputFocus",function(){n.inputContainer.scrollIntoView(!1)}),setTimeout(function(){return $(window).off("resize.inputFocus")},1e3)},n.handleInputChange=function(e){n.props.onInputChange(e.target.value)},n.handleInputKeyPress=function(e){"Enter"===e.key&&n.handleInputSubmit()},n.handleInputSubmit=function(){n.props.inputText&&n.props.onInputSubmit(),n.props.browserProperties.mobile&&n.input.blur()},n.handleReply=function(e){n.props.onReply(e),n.isIos||n.input.focus()},n.handleCancelReply=function(){n.props.onReply(void 0),n.props.onInputChange("")};var o=t.browserProperties;return n.isIos=o.iphone||o.ipad||o.ipod,n}return k(t,e),t.prototype.componentDidMount=function(){var e=this;this.autoUpdateTimer=setInterval(function(){return e.forceUpdate()},1e4)},t.prototype.componentDidUpdate=function(e){this.input&&this.props.selected&&this.props.isLandscape!==e.isLandscape&&this.props.browserProperties.mobile&&this.input.blur()},t.prototype.componentWillUnmount=function(){clearTimeout(this.autoUpdateTimer)},t.prototype.render=function(){var e=this,t=["input-container"];this.props.replyingTo&&t.push("reply");var n=["submit-button button"];this.props.inputText&&n.push("accent-color");var o=Math.floor(this.props.inputTime),r=this.props.timeHelpers.formatDuration(o,":",!1,0),s=this.props.replyingTo?this.props.resources.Embed_AddReply:this.props.stringHelpers.format(this.props.resources.Embed_AddCommentAt,r);return i.createElement(P,{id:this.props.id,tabId:this.props.tabId,className:"comments",selected:this.props.selected},i.createElement("div",{className:"scroll-container"},i.createElement(I,{isLoading:this.props.isLoading},this.props.threads.map(function(t){return i.createElement(R,{key:t.comment.id,thread:t,addedComment:e.props.addedComment,replyingTo:e.props.replyingTo,isAuthenticated:e.props.isAuthenticated,onSetExpanded:function(n){return e.props.onSetThreadExpanded(t,n)},onClick:function(t){return e.props.onContentRowClick(t)},onDelete:function(t){return e.props.onDelete(t)},onReply:e.handleReply})}))),this.props.replyingTo&&i.createElement("div",{className:"reply-indicator"},i.createElement(p.a,{title:this.props.resources.Embed_CancelReply,iconCode:"clear",onActivate:this.handleCancelReply}),i.createElement("span",null,this.props.stringHelpers.format(this.props.resources.Embed_ReplyingTo,this.props.replyingTo.userDisplayName))),this.props.isAuthenticated&&i.createElement("div",{className:t.join(" "),ref:function(t){return e.inputContainer=t}},i.createElement("input",{type:"text",className:"input",placeholder:s,value:this.props.inputText,ref:function(t){return e.input=t},onFocus:this.handleInputFocus,onBlur:function(){return D.setEmbedViewport({fixed:!0})},onChange:this.handleInputChange,onKeyPress:this.handleInputKeyPress}),i.createElement("div",{className:"input-controls"},this.props.inputText&&!this.props.replyingTo&&i.createElement("div",{className:"input-time"},r),i.createElement(p.a,{iconCode:"send",className:n.join(" "),onActivate:this.handleInputSubmit,title:this.props.resources.ShareControl_Send}))))},t}(i.Component)),A=function(){function e(){}return e.ContentsTabId="contentsTab",e.ContentsPaneId="contentsPane",e.CommentsTabId="commentsTab",e.CommentsPaneId="commentsPane",e.NotesTabId="notesTab",e.NotesPaneId="notesPane",e.SearchTabId="searchTab",e.SearchPaneId="searchPane",e}(),L=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=f(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L(t,e),t.prototype.render=function(){var e=this,t={time:Math.max(0,this.props.quiz.time-.5)};return i.createElement("div",{className:"content-row quiz-row",onClick:function(){return e.props.onClick(t)}},i.createElement("div",{className:"content-wrapper"},i.createElement("div",{className:"content-row-thumbnail"},i.createElement("i",{className:"icon material-icons"},"assignment_turned_in")),i.createElement("div",{className:"content-row-label ellipsis"},this.props.quiz.text),i.createElement("div",{className:"content-row-time"},this.props.timeHelpers.formatDuration(Math.floor(this.props.quiz.time),":",!1,0))))},t}(i.Component)),B=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),H=f(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.render=function(){var e=this,t=this.props.thumbnail,n=t.queryParams?Panopto.Core.StringHelpers.addQueryParameter(PanoptoTS.Viewer.Constants.ThumbUrl,t.queryParams):Panopto.cacheRoot+"/Images/no_thumbnail.svg";return i.createElement(p.a,{className:"content-row",role:"listitem",onActivate:function(){return e.props.onClick(t)}},i.createElement("div",{className:"content-wrapper"},i.createElement("div",{className:"content-row-thumbnail",style:{backgroundImage:"url("+n+")"}}),i.createElement("div",{className:"content-row-label ellipsis"},this.props.thumbnail.text),i.createElement("div",{className:"content-row-time"},this.props.timeHelpers.formatDuration(Math.floor(this.props.thumbnail.time),":",!1,0))))},t}(i.Component)),K=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=PanoptoTS.Viewer.Data.Thumbnail,V=f(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype.render=function(){var e=this,t=s.where(this.props.contents,{isQuestionList:!0}),n=s.sortBy(this.props.thumbnails.concat(t),"time");return i.createElement(P,{id:this.props.id,tabId:this.props.tabId,className:"contents",selected:this.props.selected},i.createElement("div",{className:"scroll-container"},i.createElement("div",{className:"title"},this.props.resources.Embed_TableOfContents),i.createElement(I,null,n.map(function(t){return t instanceof F?i.createElement(H,{key:t.queryParams.eventTargetPID+"_"+t.queryParams.number,thumbnail:t,onClick:e.props.onContentRowClick}):i.createElement(M,{key:t.id,quiz:t,onClick:e.props.onContentRowClick})}))))},t}(i.Component)),q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMouseDown=function(){n.props.onSelected(),n.setState({clicked:!0})},n.handleBlur=function(){n.setState({clicked:!1})},n.state={clicked:!1},n}return q(t,e),t.prototype.render=function(){var e=["event-tab"];this.props.selected&&e.push("selected"),this.state.clicked&&e.push("clicked");var t=["button","material-icons"];return this.props.selected&&t.push("safety-accent-border"),i.createElement("div",{id:this.props.id,className:e.join(" "),role:"tab",title:this.props.title,"aria-controls":this.props.paneId,"aria-selected":this.props.selected,tabIndex:this.props.selected?0:-1,ref:this.props.innerRef,onMouseDown:this.handleMouseDown,onBlur:this.handleBlur},i.createElement("i",{className:t.join(" "),"aria-hidden":"true"},this.props.materialIcon))},t}(i.Component);!function(e){e.Contents="Contents",e.Notes="Notes",e.Discussion="Discussion",e.Search="Search"}(y||(y={}));var U=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),z=f(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDeleteActionItemClick=function(){t.props.onDelete(),t.setState({actionMenuOpen:!1})},t}return U(t,e),t.prototype.componentDidMount=function(){this.props.scrollIntoView&&this.element.scrollIntoView(!1)},t.prototype.render=function(){var e=this,t=["content-row"];!1===this.props.content.saved&&t.push("temp-event");var n=Panopto.user.isAdmin||Panopto.user.userKey===this.props.content.user;return i.createElement(p.a,{className:t.join(" "),role:"listitem",innerRef:function(t){return e.element=t},onActivate:this.props.onClick},i.createElement("div",{className:"content-wrapper"},i.createElement("div",{className:"content-row-label"},this.props.content.text),i.createElement("div",{className:"content-row-time"},this.props.timeHelpers.formatDuration(Math.floor(this.props.content.time),":",!1,0)),i.createElement("div",{className:"action-menu-wrapper"},n&&i.createElement(u,{title:this.props.resources.Embed_MoreActions},i.createElement(p.a,{role:"menuitem",className:"item",onActivate:this.handleDeleteActionItemClick},i.createElement("i",{className:"material-icons","aria-hidden":"true"},"delete"),this.props.resources.Delete)))))},t}(i.Component)),W=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=f(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputFocus=function(){D.setEmbedViewport({fixed:!1}),$(window).on("resize.inputFocus",function(){t.inputContainer.scrollIntoView(!1)}),setTimeout(function(){return $(window).off("resize.inputFocus")},1e3)},t.handleInputChange=function(e){t.props.onInputChange(e.target.value)},t.handleInputKeyPress=function(e){"Enter"===e.key&&t.handleInputSubmit()},t.handleInputSubmit=function(){t.props.inputText&&t.props.onInputSubmit(),t.props.browserProperties.mobile&&t.input.blur()},t}return W(t,e),t.prototype.componentDidUpdate=function(e){this.props.selected&&this.props.isLandscape!==e.isLandscape&&$.browser.mobile&&this.input.blur()},t.prototype.render=function(){var e=this,t=["submit-button button"];this.props.inputText&&t.push("accent-color");var n=Math.floor(this.props.inputTime),o=this.props.timeHelpers.formatDuration(n,":",!1,0),r=this.props.stringHelpers.format(this.props.resources.Embed_AddNoteAt,o);return i.createElement(P,{id:this.props.id,tabId:this.props.tabId,className:"notes",selected:this.props.selected},i.createElement("div",{className:"scroll-container"},i.createElement(I,{isLoading:this.props.isLoading},this.props.notes.map(function(t){return i.createElement(z,{key:t.id,content:t,scrollIntoView:e.props.addedNote&&t.id===e.props.addedNote.id,onClick:function(){return e.props.onContentRowClick(t)},onDelete:function(){return e.props.onDelete(t)}})}))),i.createElement("div",{className:"input-container",ref:function(t){return e.inputContainer=t}},i.createElement("input",{type:"text",className:"input",placeholder:r,value:this.props.inputText,ref:function(t){return e.input=t},onFocus:this.handleInputFocus,onBlur:function(){return D.setEmbedViewport({fixed:!0})},onChange:this.handleInputChange,onKeyPress:this.handleInputKeyPress}),i.createElement("div",{className:"input-controls"},this.props.inputText&&i.createElement("div",{className:"input-time"},o),i.createElement(p.a,{iconCode:"send",className:t.join(" "),onActivate:this.handleInputSubmit,title:this.props.resources.ShareControl_Send}))))},t}(i.Component)),J=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=function(){return(G=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Y=PanoptoTS.Viewer.Data.Event,X=f(function(e){function t(t){var n=e.call(this,t)||this;return n.eventType=a.EventType.Note,n.handleInputChange=function(e){e&&!n.lastInputText&&n.setState({inputTime:n.props.currentTime}),!e&&n.lastInputText&&n.setState({inputTime:void 0}),n.setState({inputText:e}),n.lastInputText=e},n.handleInputSubmit=function(){var e=n.addNote();n.props.deliveryService.createEvent(n.props.deliveryId,n.eventType,n.state.inputText,n.state.inputTime,!0,void 0,n.props.isBroadcast,function(t){n.confirmNoteAdd(e.id,t)},function(){n.removeNoteById(e.id)})},n.handleDeleteNote=function(e){n.updateNoteById(e.id,function(e){return e.saved=!1}),n.props.deliveryService.deleteEvent(n.props.deliveryId,n.eventType,e.eventPublicId,function(){n.removeNoteById(e.id)},function(){alert(n.props.resources.Embed_NoteDeleteFailed),n.updateNoteById(e.id,function(e){return e.saved=!0})})},n.state={notes:[],addedNote:void 0,isLoading:!1,inputText:"",inputTime:void 0},n}return J(t,e),t.prototype.componentDidMount=function(){var e=this;this.setState({isLoading:!0}),this.props.deliveryService.search(this.props.deliveryId,this.eventType,void 0,void 0,void 0,void 0,void 0,function(t){e.setState({notes:t.map(function(e){return new Y(e)}),isLoading:!1})},$.noop)},t.prototype.addNote=function(){var e={id:"temp-event"+Math.round(1e8*Math.random()).toString(),type:this.eventType,text:this.state.inputText,time:this.state.inputTime,user:Panopto.user.userKey,saved:!1},t=this.state.notes.slice(),n=s.findLastIndex(t,function(t){return t.time<=e.time})+1;return t.splice(n,0,e),this.setState({notes:t,addedNote:e,inputText:"",inputTime:void 0}),this.lastInputText="",e},t.prototype.confirmNoteAdd=function(e,t){this.updateNoteById(e,function(e){e.id=t.EventID.toString(),e.eventPublicId=t.PublicId.toString(),e.saved=!0})},t.prototype.updateNoteById=function(e,t){var n=this.state.notes.slice(),o=s.findWhere(n,{id:e});o&&(t(o),this.setState({notes:n}))},t.prototype.removeNoteById=function(e){var t,n=s.findIndex(this.state.notes,function(t){return t.id===e});if(n>-1){var o=this.state.notes.slice();t=o.splice(n,1)[0],this.setState({notes:o})}return t},t.prototype.render=function(){var e=void 0!==this.state.inputTime?this.state.inputTime:this.props.currentTime;return i.createElement(Z,G({},this.props,{notes:this.state.notes,addedNote:this.state.addedNote,isLoading:this.state.isLoading,inputText:this.state.inputText,inputTime:e,onInputChange:this.handleInputChange,onInputSubmit:this.handleInputSubmit,onDelete:this.handleDeleteNote}))},t}(i.Component)),ee=(n(160),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ee(t,e),t.prototype.render=function(){var e=["react-loading-spinner-small"];return this.props.className&&e.push(this.props.className),i.createElement("div",{className:e.join(" ")},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},i.createElement("path",{id:"path",d:"M26 50A24 24 0 0 0 74 50A24 28 0 0 1 26 50",fill:this.props.fillColor,stroke:"none"})))},t}(i.Component),ne=(n(162),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),oe=function(e){function t(n){var o=e.call(this,n)||this;return o.handleMouseDown=function(e){o.setState({clicked:!0}),e.button===t.LeftMouseButton&&o.props.onSelect()},o.handleKeyPress=function(e){e.which!==Panopto.Core.Key.Enter&&e.which!==Panopto.Core.Key.Space||(o.props.onSelect(),e.preventDefault())},o.handleBlur=function(){o.setState({clicked:!1})},o.state={clicked:!1},o}return ne(t,e),t.prototype.render=function(){var e=["rating-star","material-icons"];return this.props.filled&&e.push("filled"),this.state.clicked&&e.push("clicked"),i.createElement("div",{className:e.join(" "),role:"button",tabIndex:this.props.tabIndex||0,title:this.props.tooltip,"aria-current":this.props.selected,onMouseEnter:this.props.onHover,onFocus:this.props.onHover,onMouseDown:this.handleMouseDown,onKeyPress:this.handleKeyPress,onBlur:this.handleBlur})},t.LeftMouseButton=0,t}(i.Component),re=(n(164),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),ie=function(e){function t(t){var n=e.call(this,t)||this;return n.handleRatingHover=function(e){n.setState({hoverRating:e}),e!==n.props.currentRating&&n.setState({isNewHover:!0})},n.handleRatingSelect=function(e){n.setState({hoverRating:e,isNewHover:!1}),n.props.onRatingSelected(e)},n.handleContainerLeave=function(){n.setState({hoverRating:null,isNewHover:!0})},n.handleRatingBlur=function(){n.blurTimeoutId=window.setTimeout(function(){n.handleContainerLeave()})},n.handleRatingFocus=function(){window.clearTimeout(n.blurTimeoutId)},n.state={hoverRating:null,isNewHover:!0},n}return re(t,e),t.prototype.render=function(){var e=this,t=Number(this.state.hoverRating||this.props.currentRating),n=["rating-selector"];return this.state.hoverRating&&this.state.isNewHover&&n.push("active"),i.createElement("div",{className:n.join(" "),onMouseLeave:this.handleContainerLeave,onBlur:this.handleRatingBlur,onFocus:this.handleRatingFocus},[1,2,3,4,5].map(function(n){return i.createElement(oe,{key:n,selected:n===e.props.currentRating,filled:t>=n,tooltip:e.getTooltipText(n),tabIndex:e.props.tabIndex,onHover:e.handleRatingHover.bind(e,n),onSelect:e.handleRatingSelect.bind(e,n)})}))},t.prototype.getTooltipText=function(e){return 1===e?this.props.resources.RatingSelector_RateOneStar:PanoptoTS.StringHelpers.format(this.props.resources.RatingSelector_RateMultipleStars,e)},t}(i.Component),se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ae=f(function(e){function t(n){var o=e.call(this,n)||this;return o.lastRequestId=0,o.handleSelectRating=function(e){o.lastRequestId++;var t=o.lastRequestId;clearTimeout(o.confirmationTimeoutId);var n=o.props.deliveryRating;e!==n&&(o.setState({isSaving:!0,showConfirmation:!1}),o.props.onRatingUpdated(e),o.props.deliveryService.rateDelivery(o.props.deliveryId,e,function(){t===o.lastRequestId&&(o.setState({isSaving:!1}),o.showRatingConfirmation())},function(){t===o.lastRequestId&&(alert(o.props.resources.Embed_RatingSaveFailed),o.props.onRatingUpdated(n),o.setState({isSaving:!1}))}))},o.showRatingConfirmation=function(){o.setState({showConfirmation:!0}),o.confirmationTimeoutId=setTimeout(function(){return o.setState({showConfirmation:!1})},t.confirmationDisplayPeriod)},o.state={showConfirmation:!1,isSaving:!1},o}return se(t,e),t.prototype.render=function(){var e=this.state.showConfirmation?this.props.resources.Embed_ThanksForRating:this.props.deliveryRating?this.props.resources.Embed_YourRating:this.props.resources.Embed_RateThisVideo;return i.createElement("div",{className:"rating-menu-item",tabIndex:0},i.createElement("div",{className:"label"},e,this.state.isSaving&&i.createElement(te,{className:"loading-spinner",fillColor:this.props.brandColorSafe})),i.createElement(ie,{currentRating:this.props.deliveryRating,resources:this.props.resources,onRatingSelected:this.handleSelectRating}))},t.confirmationDisplayPeriod=2e3,t}(i.Component)),pe={Bookmarks:"bookmarks",Notes:"notes",Comments:"comments",Transcript:"transcript",UserCreatedTranscript:"user-created-transcript",MachineTranscript:"machine-transcript",OCROutput:"ocr-output",youtube:"youtube"},ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ue=f(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ce(t,e),t.prototype.render=function(){var e=["icon material-icons"];return e.push(pe[this.props.content.type]||"contents"),i.createElement(p.a,{className:"content-row",role:"listitem",onActivate:this.props.onClick},i.createElement("div",{className:"content-wrapper"},i.createElement("div",{className:e.join(" ")},"OCROutput"===this.props.content.type&&i.createElement("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/_custom/ocr",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},i.createElement("g",{id:"Group"},i.createElement("polygon",{points:"0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"}),i.createElement("path",{fill:"currentColor",d:"M3.00000001,5.00000001 L3.00000001,9.00000001 L5.00000001,9.00000001 L5.00000001,5.00000001 L9.00000001,5.00000001 L9.00000001,3.00000001 L5.00000001,3.00000001 C3.90000002,3.00000001 3.00000001,3.90000002 3.00000001,5.00000001 Z M5.00000001,15.0000001 L3.00000001,15.0000001 L3.00000001,19.0000001 C3.00000001,20.1000001 3.90000002,21.0000001 5.00000001,21.0000001 L9.00000001,21.0000001 L9.00000001,19.0000001 L5.00000001,19.0000001 L5.00000001,15.0000001 Z M19.0000001,19.0000001 L15.0000001,19.0000001 L15.0000001,21.0000001 L19.0000001,21.0000001 C20.1000001,21.0000001 21.0000001,20.1000001 21.0000001,19.0000001 L21.0000001,15.0000001 L19.0000001,15.0000001 L19.0000001,19.0000001 Z M19.0000001,3.00000001 L15.0000001,3.00000001 L15.0000001,5.00000001 L19.0000001,5.00000001 L19.0000001,9.00000001 L21.0000001,9.00000001 L21.0000001,5.00000001 C21.0000001,3.90000002 20.1000001,3.00000001 19.0000001,3.00000001 Z"})),i.createElement("polygon",{fill:"currentColor",points:"14.0000001 17.0000001 7.00000003 17.0000001 7.00000003 15.0000001 14.0000001 15.0000001"}),i.createElement("polygon",{fill:"currentColor",points:"17.0000001 13.0000001 7.00000003 13.0000001 7.00000003 11 17.0000001 11"}),i.createElement("polygon",{fill:"currentColor",points:"17.0000001 9.00000004 7.00000003 9.00000004 7.00000003 7.00000003 17.0000001 7.00000003"})))),i.createElement("div",{className:"content-row-label"},i.createElement("span",{dangerouslySetInnerHTML:{__html:this.processSearchResultText(this.props.content.text)}})),i.createElement("div",{className:"content-row-time"},this.props.timeHelpers.formatDuration(Math.floor(this.props.content.time),":",!1,0))))},t.prototype.processSearchResultText=function(e){return Panopto.Core.TextHelpers.cleanTextWithHighlighting(e)},t}(i.Component)),le=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),de=f(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleInputFocus=function(){D.setEmbedViewport({fixed:!1}),$(window).on("resize.inputFocus",function(){t.inputContainer.scrollIntoView(!0)}),setTimeout(function(){return $(window).off("resize.inputFocus")},1e3)},t.handleKeyPress=function(e){e.which===Panopto.Core.Key.Enter&&(e.preventDefault(),t.props.browserProperties.mobile&&t.input.blur())},t.handleQueryInputChange=function(e){t.props.onQueryChange(e.currentTarget.value)},t.handleQueryClear=function(){t.props.onQueryChange(""),t.input.focus()},t}return le(t,e),t.prototype.componentDidUpdate=function(e){this.props.selected&&!e.selected&&this.input.focus(),this.props.selected&&this.props.isLandscape!==e.isLandscape&&this.props.browserProperties.mobile&&this.input.blur()},t.prototype.render=function(){var e=this,t=["input-container search"];return this.props.query&&t.push("query-active"),this.props.isLoading&&t.push("loading"),i.createElement(P,{id:this.props.id,tabId:this.props.tabId,className:"search",selected:this.props.selected},i.createElement("div",{className:t.join(" "),ref:function(t){return e.inputContainer=t}},i.createElement("input",{type:"text",className:"input",placeholder:this.props.resources.Embed_SearchThisVideo,value:this.props.query,ref:function(t){return e.input=t},onFocus:this.handleInputFocus,onBlur:function(){return D.setEmbedViewport({fixed:!0})},onChange:this.handleQueryInputChange,onKeyPress:this.handleKeyPress}),i.createElement(te,{className:"loading-spinner",fillColor:this.props.brandColorSafe}),i.createElement(p.a,{iconCode:"cancel",className:"query-clear-button",onActivate:this.handleQueryClear,title:this.props.resources.Clear})),i.createElement("div",{className:"scroll-container search"},this.props.contents&&i.createElement(I,{emptyListText:this.props.resources.Embed_NoResults},this.props.contents.map(function(t){return i.createElement(ue,{key:t.id,content:t,onClick:function(){return e.props.onContentRowClick(t)}})}))))},t}(i.Component)),he=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(){return(me=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},fe=PanoptoTS.Viewer.Data.Event,ye=f(function(e){function t(n){var o=e.call(this,n)||this;return o.lastQuery="",o.handleQueryChanged=function(e){o.setState({query:e,isLoading:!0}),o.submitQuery(e),e||o.setState({contents:void 0,isLoading:!1})},o.submitQuery=s.debounce(function(e){e!==o.lastQuery?(e&&o.props.deliveryService.search(o.props.deliveryId,void 0,e,void 0,void 0,void 0,void 0,function(e){o.setState({contents:s.map(e,function(e){return new fe(e)}),isLoading:!1})},$.noop),o.lastQuery=e):o.setState({isLoading:!1})},t.queryDebouncePeriod),o.state={query:"",contents:void 0,isLoading:!1},o}return he(t,e),t.prototype.render=function(){return i.createElement(de,me({},this.props,this.state,{onQueryChange:this.handleQueryChanged}))},t.queryDebouncePeriod=250,t}(i.Component)),ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),be=function(e){function t(t){var n=e.call(this,t)||this;n.tabElements={},n.handleEventTabKeyDown=function(e){if(("ArrowLeft"===e.key||"ArrowRight"===e.key)&&$(e.target).is(".event-tab")){var t="ArrowLeft"===e.key?-1:1;n.setState(function(e,o){var r=n.enabledTabs(o),i=r.indexOf(e.visiblePane);return{visiblePane:r[(r.length+i+t)%r.length]}},function(){return n.tabElements[n.state.visiblePane].focus()}),e.preventDefault(),e.stopPropagation()}},n.handleEventPaneKeyDown=function(e){e.ctrlKey&&"ArrowUp"===e.key&&(n.tabElements[n.state.visiblePane].focus(),e.preventDefault(),e.stopPropagation())},n.handleTabSelected=function(e){n.setState({visiblePane:e}),y[window.location.hash.substring(1)]&&(window.location.hash="#"+e)},n.handleContentRowClick=function(e){n.props.onSeekRequested(e.time)};var o,r=Panopto.Core.UI.Color.parse(Panopto.branding.accentColor).getSafety().toHex();return n.container={resources:t.resources,timeHelpers:Panopto.Core.TimeHelpers,stringHelpers:PanoptoTS.StringHelpers,deliveryService:new a.DeliveryService({uriScheme:Panopto.uriScheme,webServerFQDN:Panopto.webServerFQDN,appRoot:Panopto.appRoot,csrfTokenCookieName:Panopto.Core.Constants.CsrfTokenCookieName,csrfTokenHeaderName:Panopto.Core.Constants.CsrfTokenHeaderName}),browserProperties:$.browser,brandColorSafe:r},n.props.delivery.user&&(o=n.props.delivery.user.rating||void 0),n.state={visiblePane:n.enabledTabs(t)[0],deliveryRating:o},n}return ve(t,e),t.prototype.componentDidMount=function(){var e=y[window.location.hash.substring(1)];e&&this.setState({visiblePane:e})},t.prototype.enabledTabs=function(e){var n=this;return s.filter(t.allTabs,function(t){return n.isTabEnabled(t,e)})},t.prototype.isTabEnabled=function(e,t){var n=t||this.props,o=!1;switch(e){case y.Contents:o="all"===n.interactivity;break;case y.Discussion:o="all"===n.interactivity&&n.areSocialFeaturesEnabled&&n.delivery.discussionEnabled;break;case y.Notes:o="all"===n.interactivity&&Boolean(n.userId);break;case y.Search:o="none"!==n.interactivity}return o},t.prototype.render=function(){var e=this,t=["event-overlay"];this.props.isMobile&&t.push("mobile");var n=Boolean(this.props.userId);return i.createElement(m,{value:this.container},i.createElement("div",{className:t.join(" "),onKeyDown:this.props.onKeyDown},i.createElement("div",{className:"tab-strip",role:"tablist",onKeyDown:this.handleEventTabKeyDown},this.isTabEnabled(y.Contents)&&i.createElement(Q,{id:A.ContentsTabId,title:this.props.resources.Embed_ContentsTab,paneId:A.ContentsPaneId,materialIcon:"list",onSelected:function(){return e.handleTabSelected(y.Contents)},selected:this.state.visiblePane===y.Contents,innerRef:function(t){return e.tabElements[y.Contents]=t}}),this.isTabEnabled(y.Discussion)&&i.createElement(Q,{id:A.CommentsTabId,title:this.props.resources.Embed_DiscussionTab,paneId:A.CommentsPaneId,materialIcon:"forum",onSelected:function(){return e.handleTabSelected(y.Discussion)},selected:this.state.visiblePane===y.Discussion,innerRef:function(t){return e.tabElements[y.Discussion]=t}}),this.isTabEnabled(y.Notes)&&i.createElement(Q,{id:A.NotesTabId,title:this.props.resources.Embed_NotesTab,paneId:A.NotesPaneId,materialIcon:"library_books",onSelected:function(){return e.handleTabSelected(y.Notes)},selected:this.state.visiblePane===y.Notes,innerRef:function(t){return e.tabElements[y.Notes]=t}}),this.isTabEnabled(y.Search)&&i.createElement(Q,{id:A.SearchTabId,title:this.props.resources.Embed_SearchTab,paneId:A.SearchPaneId,materialIcon:"search",onSelected:function(){return e.handleTabSelected(y.Search)},selected:this.state.visiblePane===y.Search,innerRef:function(t){return e.tabElements[y.Search]=t}}),n&&this.props.areRatingsEnabled&&i.createElement("div",{className:"action-menu-wrapper"},i.createElement(u,{title:this.props.resources.Embed_MoreActions},i.createElement(ae,{deliveryId:this.props.delivery.id,deliveryRating:this.state.deliveryRating,onRatingUpdated:function(t){return e.setState({deliveryRating:t})}})))),i.createElement("div",{className:"event-pane-container",onKeyDown:this.handleEventPaneKeyDown},this.isTabEnabled(y.Contents)&&i.createElement(V,{id:A.ContentsPaneId,tabId:A.ContentsTabId,selected:this.state.visiblePane===y.Contents,thumbnails:this.props.delivery.thumbnails,contents:this.props.delivery.contents,onContentRowClick:this.handleContentRowClick}),this.isTabEnabled(y.Discussion)&&i.createElement(E,{deliveryId:this.props.delivery.id,userName:this.props.delivery.user.name,currentTime:this.props.currentTime,isBroadcast:this.props.isBroadcast,render:function(t,o,r,s,a,p,c,u,l,d,h){return i.createElement(j,{id:A.CommentsPaneId,tabId:A.CommentsTabId,selected:e.state.visiblePane===y.Discussion,inputTime:r,inputText:s,replyingTo:a,addedComment:p,isAuthenticated:n,onInputChange:c,onInputSubmit:u,threads:t,isLoading:o,isLandscape:e.props.isLandscape,onContentRowClick:e.handleContentRowClick,onSetThreadExpanded:l,onReply:d,onDelete:h})}}),this.isTabEnabled(y.Notes)&&i.createElement(X,{id:A.NotesPaneId,tabId:A.NotesTabId,selected:this.state.visiblePane===y.Notes,deliveryId:this.props.delivery.id,currentTime:this.props.currentTime,isLandscape:this.props.isLandscape,isBroadcast:this.props.isBroadcast,onContentRowClick:this.handleContentRowClick}),this.isTabEnabled(y.Search)&&i.createElement(ye,{id:A.SearchPaneId,tabId:A.SearchTabId,selected:this.state.visiblePane===y.Search,deliveryId:this.props.delivery.id,isLandscape:this.props.isLandscape,onContentRowClick:this.handleContentRowClick}))))},t.allTabs=[y.Contents,y.Discussion,y.Notes,y.Search],t}(i.Component);Panopto.Embed=Panopto.Embed||{},Panopto.Embed.EventOverlay=Object(r.a)(be)},33:function(e,t){e.exports=PanoptoViewer}});
//# sourceMappingURL=file://seasyn/tfsbuilds/panopto_core_rel-rtc-7.11.0_x64/20191114.11/_PublishedWebsites/WebUI/Scripts/Panopto/Bundles/EventOverlayFactory.js.map