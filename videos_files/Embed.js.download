(Panopto=Panopto||{}).PlayerJsFlowplayerAdapter=function(e,t){(t=t||{}).loadCallback=t.loadCallback||$.noop;var o=new playerjs.Receiver(["play","pause","timeupdate","seeked","ended","error"],["play","pause","mute","unmute","getDuration","getPaused","getMuted","getVolume","setVolume","getCurrentTime","setCurrentTime","getLoop","setLoop"]);o.on("play",function(){e.ready?_.defer(function(){e.resume()}):t.loadCallback()}),o.on("pause",function(){_.defer(function(){e.pause()})}),o.on("mute",function(){e.mute(!0)}),o.on("unmute",function(){e.mute(!1)}),o.on("getDuration",function(t){e.ready?t(e.video.duration):e.on("ready",function(){t(e.video.duration)})}),o.on("getPaused",function(t){t(e.paused)}),o.on("getMuted",function(t){t(e.muted)}),o.on("getVolume",function(t){t(100*e.volumeLevel)}),o.on("setVolume",function(t){e.volume(t/100)}),o.on("getCurrentTime",function(t){t(e.video.time)}),o.on("setCurrentTime",function(t){e.seek(t)});var n=!1;return o.on("getLoop",function(e){e(n)}),o.on("setLoop",function(e){n=e}),e.on("ready",function(){o.emit("play")}),e.on("pause",function(){o.emit("pause")}),e.on("resume",function(){o.emit("play")}),e.on("progress",function(){o.eventListeners.timeupdate&&o.emit("timeupdate",{seconds:e.video.time,duration:e.video.duration})}),e.on("seek",function(){o.emit("seeked")}),e.on("finish",function(){o.emit("ended"),n&&e.resume()}),e.on("error",function(){o.emit("error")}),o},(Panopto=Panopto||{}).Branding=Panopto.Branding||{};var Panopto,PanoptoTS,renderBrandingStyleElement=$("<style />").appendTo("head");Panopto.Branding.createLogo=function(e,t,o){var n={svgUrl:Panopto.branding.svgLogo,pngUrl:t.png,width:t.svgWidth,height:t.svgHeight,mainLogoToolTip:Panopto.GlobalResources.Everything,customerLogoClass:Panopto.useFreeTrialTerminology?"trial-logo":"",customerLogoLink:Panopto.branding.siteLogoLink,cobrandLink:Panopto.useFreeTrialTerminology?Panopto.freeTrialSupportUrl:"http://www.panopto.com",cobrandString:Panopto.useFreeTrialTerminology?Panopto.GlobalResources.PanoptoLogo_Beta:Panopto.GlobalResources.PanoptoLogo_PoweredBy,listPageLink:PanoptoTS.StringHelpers.format("{0}/Pages/Sessions/List.aspx",Panopto.appRoot),linksEnabled:o},i=_.template($("#customerLogoTemplate").html())(n),a=_.template($("#panoptoLogoTemplate").html())(n);e.html(Panopto.useFreeTrialTerminology||!n.pngUrl||-1!==n.pngUrl.indexOf("_branding")?i:a)},Panopto.Branding.renderBrandingColors=function(e,t){var o,n,i,a=Panopto.Core.UI.Color.parse(e),r=a.toHex(),s=a.getSafety().toHex(),l=a.getSafety().multiply(.9).toHex(),c=a.getSafety().multiply(.8).toHex(),u=[{selector:".accent-color",styleChanges:["color: {0}","border-color: {0}"]},{selector:".selected.accent-left-border",styleChanges:["border-left-color: {0}"]},{selector:".content-table table .selected .highlight-cell",styleChanges:["background-color: {0}"]},{selector:".embedded-plugin#batchUpload #sessionList .session.selected .session-check.accent-button",styleChanges:["background-color: {0}"]},{selector:".accent-background",styleChanges:["background-color: {0}"]},{selector:".selected.accented-tab",styleChanges:["border-left-color: {0}"]}],d=[{selector:".selected.accent-left-border a",styleChanges:["border-left-color: {0}"]},{selector:".selected .accent-button",styleChanges:["border-color: {0}"]},{selector:".selected.accented-tab",styleChanges:["background-color: {0}"]},{selector:".safety-accent-border",styleChanges:["border-color: {0}"]},{selector:".safety-background",styleChanges:["background-color: {0}"]},{selector:".safety-text",styleChanges:["color: {0}"]},{selector:".safety-accent-highlighted.highlighted .event-text",styleChanges:["color: {0}"]},{selector:".safety-accent-highlighted.editing .event-text",styleChanges:["color: {0}"]},{selector:".safety-accent-highlighted.highlighted .event-time",styleChanges:["color: {0}"]},{selector:".safety-accent-highlighted.editing .event-time",styleChanges:["color: {0}"]},{selector:".event-tab-pane .match",styleChanges:["color: {0}"]},{selector:".safety-border",styleChanges:["border-color: {0}"]},{selector:".colored-scroll-button",styleChanges:["color: {0}"]},{selector:".selected.branded-border",styleChanges:["border-color: {0}"]}];t?u.push({selector:".safety-accent-border-ifcustom",styleChanges:["border-color: {0}"]}):d.push({selector:".safety-accent-border-ifcustom",styleChanges:["border-color: {0}"]});var p=function(e,t){return{selector:e,styleChanges:[PanoptoTS.StringHelpers.format("background-color: {0}",t),PanoptoTS.StringHelpers.format("border-color: {0}",t)]}},A=".branded-button:hover",h=".branded-button:active";function y(e){_.each(e.styleChanges,function(t){$.rule(e.selector+"{"+t+" !important}").appendTo(renderBrandingStyleElement)})}function f(e,t){_.each(e,function(e){y(e=function(e,t){return e.styleChanges=_.map(e.styleChanges,function(e){return PanoptoTS.StringHelpers.format(e,t)}),e}(e,t))})}Panopto.Core.Browser.isIE8||(A+=":not(.disabled)",h+=":not(.disabled)"),o=p(".branded-button",s),n=p(A,l),i=p(h,c),f(u,r),f(d,s),f([{selector:".embedded-plugin#batchUpload #sessionList .session.selected .session-check.accent-button:hover",styleChanges:["background-color: {0}"]},{selector:".embedded-plugin#batchUpload .create-upload:hover .create-upload-icon.image-accent-background",styleChanges:["background-color: {0}"]}],l),y(o),y(n),y(i)},Panopto.Branding.brandElements=function(e){var t=Panopto.Core.UI.Color.parse(e),o=t.toHex(),n=t.getSafety().toHex();Panopto.Branding.brandImageBackgrounds(".image-accent-background",".image-accent-background",o),Panopto.Branding.animateLoadingIndicator(n)},Panopto.Branding.animateLoadingIndicator=function(e){var t=Panopto.Core.Browser.isCssSupported("animation");Panopto.Core.UI.Components.spinner($("#loadingMessage"),t),Panopto.Core.UI.Components.spinner($("#primaryBuffering"),t),Panopto.Core.UI.Components.spinner($("#secondaryBuffering"),t),Panopto.Core.UI.Components.spinner($(".logging-out-spinner"),t),Panopto.Core.UI.Components.spinner($(".logging-in-spinner"),t),Panopto.Core.UI.Components.spinner($("#modalSpinner"),t),Panopto.Core.UI.Components.spinner($(".event-tab-spinner"),t),Panopto.Branding.brandImageBackgrounds(".branded-animation",".spinner-background",e),$("#navBar .browse-spinner #path").css("fill",e)},Panopto.Branding.brandImageBackground=function(e,t){-1!==t.indexOf("_branding")&&e.css("background-image","url("+t+")")},Panopto.Branding.brandImageBackgroundRule=function(e,t){var o=-1!==t.indexOf("_branding");return o&&$.rule(e+"{background-image: url("+t+") !important}").appendTo(renderBrandingStyleElement),o},Panopto.Branding.brandImageBackgrounds=function(e,t,o){var n=_.filter(_.map($(e),function(e){var t=$(e).css("background-image");return t&&(t=t.replace(/^url|[\(\")]/g,"")),t}),function(e){return"none"!==e}),i=n.length,a=function(e){e||$.rule(t+"{background-color:"+o+" !important}").appendTo(renderBrandingStyleElement)};a(i),_.each(n,function(e){var t=new Image,o=function(){a(--i)};t.onload=o,t.onerror=o,t.src=e})},function(e){!function(e){var t=function(){function t(e,t,o,n,i,a){this.blocked=e,this.userId=t,this.ownerId=o,this.learnMoreUrl=n,this.signupUrl=i,this.resources=a,this.eventNamespace="quota-playback-modal",this._onToggle=new PanoptoCore.TypedCallback}return Object.defineProperty(t.prototype,"onToggle",{get:function(){return this._onToggle},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this;this.wrapper=$(t.template(this)),this.modal=this.wrapper.find(".quota-playback-modal"),this.wrapper.click(function(){e.blocked||e.hide()}),this.modal.click(function(e){e.stopPropagation()}),this.wrapper.hide(),$(window).resize(function(){e.modal.is(":visible")&&e.resize()})},t.prototype.show=function(){var t,o=this;if(this.userId)t=this.userId===this.ownerId?new e.QuotaPlaybackModalDialogs.OwnerDialog(this.resources):new e.QuotaPlaybackModalDialogs.ViewerDialog(this.resources);else{var n=new e.QuotaPlaybackModalDialogs.AnonymousUserDialog(this.blocked,this.learnMoreUrl,this.signupUrl,this.resources);n.onDismiss.add(function(){o.hide()}),t=n}t.render(),this.modal.contents().replaceWith(t.getElement()),this.wrapper.show(),this.resize(),$(window).on("resize."+this.eventNamespace,function(){o.resize()}),this._onToggle.fire(!0)},t.prototype.hide=function(){this.wrapper.hide(),$(window).off("resize."+this.eventNamespace),this._onToggle.fire(!1)},t.prototype.fadeIn=function(){this.show(),this.wrapper.hide(),this.wrapper.fadeIn()},t.prototype.getElement=function(){return this.wrapper},t.prototype.resize=function(){this.modal.height(this.modal.find(".quota-dialog").height())},t.template=_.template("\n            <div class='quota-playback-modal-wrapper'>\n                <div class='quota-playback-modal'>\n                </div>\n            </div>\n        "),t}();e.QuotaPlaybackModal=t}(e.Controls||(e.Controls={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){var t=function(){function t(e,o,n,i,a,r,s,l){this.cookieService=e,this.container=o,this.resources=n,this.deliveryId=i,this.ownerId=a,this.userId=r,this.signupUrl=s,this.learnMoreUrl=l,this.secondsListened=0,this._onToggle=new PanoptoCore.TypedCallback,this.quotaBlockedCookieName=t.quotaBlockedCookiePrefix+this.deliveryId}return Object.defineProperty(t.prototype,"onToggle",{get:function(){return this._onToggle},enumerable:!0,configurable:!0}),t.prototype.initialize=function(o){var n=this;this.overQuota=o,this.overQuota||this.setBlockedCookie(!1),this.blocked=this.getBlockedCookie(),this.overQuota&&(this.availableSeconds=this.blocked?0:t.playbackTeaseDuration),this.modal=new e.QuotaPlaybackModal(this.blocked,this.userId,this.ownerId,this.learnMoreUrl,this.signupUrl,this.resources),this.modal.onToggle.add(function(e){n._onToggle.fire(e)}),this.modal.render(),this.container.append(this.modal.getElement()),window.setTimeout(function(){window.location.reload()},864e5),this.blocked&&this.modal.show()},t.prototype.update=function(e){if(!this.userId&&!this.overQuota&&0===this.secondsListened&&e){var o=parseInt(this.cookieService.getCookie(t.signupViewedCookieName),10)||0;o%t.signupShowInterval==t.signupShowInterval-1&&this.modal.show(),this.cookieService.setCookie(t.signupViewedCookieName,o+1)}this.secondsListened+=e,this.blocked=void 0!==this.availableSeconds&&this.secondsListened>=this.availableSeconds,this.blocked&&(this.modal.blocked=this.blocked,this.modal.show(),this.setBlockedCookie(!0))},t.prototype.fadeInModalForAnonymous=function(){this.userId||this.modal.fadeIn()},t.prototype.setBlockedCookie=function(e){e?this.cookieService.setCookie(this.quotaBlockedCookieName,e):this.cookieService.deleteCookie(this.quotaBlockedCookieName)},t.prototype.getBlockedCookie=function(){return"true"===this.cookieService.getCookie(this.quotaBlockedCookieName)},t.playbackTeaseDuration=30,t.quotaBlockedCookiePrefix="quotaBlocked",t.signupViewedCookieName="signupViewed",t.signupShowInterval=5,t}();e.QuotaPlaybackTracker=t}(e.Controls||(e.Controls={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(t){var o=Panopto.Core.StringHelpers,n=Panopto.Core.Key,i=function(){function i(e,t){var n=this;this.deliveryService=t,this.uniqueViewerId=null,this.downloadEnabled=!1,this.broadcastPingInterval=i.broadcastPingInterval,this.checkCopyrightNoticeRequirement=$.Deferred(),this.invocationRequested=!1,this.eventOverlayShown=!1,this.menuOpen=!1,this.nativeFullscreen=!1,this.vspSourceOverrideActive=!1,this.initParams=e,this.sessionListUrl=Panopto.uriScheme+"://"+Panopto.webServerFQDN+Panopto.appRoot+"/Pages/Sessions/List.aspx",this.defaultThumbnailUrl=Panopto.cacheRoot+"/Images/no_thumbnail.svg",this.loginUrl=String.format(this.initParams.LoginUrl,encodeURIComponent(window.location.href));var a=o.parseQueryString(location.search,void 0,!0);this.interactivity="none"===a.interactivity?"none":"false"===a.interactivity?"none":"search"===a.interactivity?"search":"all";var r=!!$.browser.mobile,s=!!($.browser.ipad||$.browser.iphone||$.browser.ipod),l=o.parseBoolean(a.iosapp),c=o.parseBoolean(a.androidapp),u=this.initParams.IsLiveBroadcast;this.isLiveBroadcast=u;var d,p=this.ensureMobileCompatibleManifest(this.initParams.VideoUrl),A=o.parseBoolean(a.advance),h=o.parseBoolean(a.autoplay)&&Panopto.features.autoPlayEnabled||A,y=!("showtitle"in a)||o.parseBoolean(a.showtitle),f=a.showbrand?o.parseBoolean(a.showbrand):Panopto.features.brandEmbedViewer,g=(_.isUndefined(a.offerviewer)||o.parseBoolean(a.offerviewer))&&!o.parseBoolean(a.internal)&&!r,m=a.start?parseFloat(a.start):void 0;a.outcome_did&&(d={outcomeId:a.outcome_did,oauthConsumerKey:a.oauth_consumer_key});var v,P=(_.isUndefined(a.autohide)||o.parseBoolean(a.autohide))&&!this.initParams.IsAudioOnly;v=_.isUndefined(a.flash)?_.isUndefined(a.htmlfirst)?this.initParams.MediaFileType===Panopto.Core.MediaFileType.mp4&&new RegExp(Panopto.embedFlashFallbackRegex).test(navigator.userAgent)||this.initParams.MediaFileType===Panopto.Core.MediaFileType.hls&&new RegExp(Panopto.features.hlsFlashFallbackRegex).test(navigator.userAgent):!o.parseBoolean(a.htmlfirst):o.parseBoolean(a.flash);var b=(Panopto.Core.Browser.fullscreenEnabled||s)&&!this.initParams.IsAudioOnly&&!l&&!c&&(!$.browser.iphone||parent!==window),w=!!this.initParams.CaptionUrl,C=PanoptoCore.CookieHelpers.getUserCookieField(Panopto.user.userKey,i.captionsCookieKey),S=_.isUndefined(a.captions)?void 0:o.parseBoolean(a.captions),k=w&&("boolean"==typeof C?C:"boolean"==typeof S?S:Panopto.captionSettings.enabledDefault),T=!(u||$.browser.iphone||$.browser.msie&&Panopto.Core.Browser.isWin7&&this.initParams.MediaFileType===Panopto.Core.MediaFileType.hls||Panopto.viewer.disableSeekAndVsp),I=PanoptoCore.CookieHelpers.getUserCookieField(Panopto.user.userKey,i.volumeCookieKey);"number"!=typeof I&&(I=i.maxVolume);var D=i.flowplayerGlobal.support.volume&&0===I,E=this.initParams.VRType>Panopto.Core.MediaVRType.None,V=Panopto.Core.UI.Components.CopyrightNotice($("#copyrightNoticeContainer"),this.initParams.CopyrightNoticeText,this.initParams.CopyrightNoticeAutoDismissDuration);if(this.deliveryId=this.initParams.SessionId,this.playlistId=a.pid,this.playlistDeliveryId=a.id,this.inviteId=a.tid,this.videoUrl=p,this.isMobile=r,this.isIos=s,this.isIosApp=l,this.isAndroidApp=c,this.playlistAdvance=A,this.autoPlayRequested=h,this.startMuted=D,this.showTitle=y,this.showBrand=f,this.showFullViewerLink=g,this.ltiOutcomeConfig=d,this.autoHideRequested=P,this.isLiveBroadcast=u,this.preferFlash=v,this.fullscreenEnabled=b,this.captionsAvailable=w,this.vspSupported=T,this.isVR=E,this.scormEnabled=a.isscorm,this.startTime=m,this.initialVolume=I,this.player=$("#player"),this.eventOverlayElement=$("#eventOverlay"),this.copyrightNotice=V,this.captionsDisplayed=k,Panopto.viewer.ultraHighScaleAnonymousWebcastMode)try{var B=window.crypto||window.msCrypto,R=new Uint32Array(2),U=new Uint16Array(4);B.getRandomValues(R),B.getRandomValues(U),this.uniqueViewerId=R[0].toString(16)+"-"+U[0].toString(16)+"-"+U[1].toString(16)+"-"+U[2].toString(16)+"-"+U[3].toString(16)+R[1].toString(16)}catch(e){this.uniqueViewerId="00000000-0000-0000-0000-000000000000"}this.configureOrientationListener();var M=this.getDeliveryInfo({deliveryId:this.deliveryId,inviteId:this.inviteId,invocationId:void 0,isBroadcast:this.isLiveBroadcast});M.then(function(e){n.setDelivery(e)}),$(function(){M.always(function(){return n.render()})})}return Object.defineProperty(i.prototype,"autoHideEnabled",{get:function(){var e=this.initParams.IsAudioOnly&&$(window).height()<i.hoverCaptionsMinHeight&&this.captionsDisplayed;return this.autoHideRequested||e},enumerable:!0,configurable:!0}),i.prototype.getDeliveryInfo=function(t){var o=t.deliveryId,n=t.inviteId,i=t.invocationId,a=t.isBroadcast,r=$.Deferred(),s=Panopto.viewer.embedAndDeliveryInfoCDNFQDNOverride||null;return this.deliveryService.getDelivery(o,n,i,{isEmbed:!0,isActiveBroadcast:a,overrideFQDN:s,uniqueViewerIdParam:this.uniqueViewerId},function(t){r.resolve(new e.Viewer.Data.Delivery(t))},function(){return r.reject()}),r.promise()},i.prototype.setDelivery=function(e){var t=Panopto.Core.PlayResumption.calculateStartTime(e.lastViewingPosition,e.duration);this.delivery=e,this.downloadUrl=e.downloadUrl,this.downloadEnabled=!(!this.downloadUrl||this.isMobile&&(this.isIos||this.isAndroidApp)),this.startTime=this.startTime||t,this.quizzes=_.filter(e.documents,function(e){return e.isQuiz}),this.showFullViewerLink=this.showFullViewerLink&&!e.isPurgedEncode,e.completionPercentage&&this.reportPercentCompleted(e.completionPercentage)},i.prototype.reportPercentCompleted=function(e){Panopto.viewer.disableSeekAndVsp&&Panopto.viewer.enableSeekAndVspAfterPercentage>0&&Panopto.viewer.enableSeekAndVspAfterPercentage<e&&this.updateDisableSeekAndVsp(!1)},i.prototype.updateDisableSeekAndVsp=function(e){Panopto.viewer.disableSeekAndVsp!==e&&(Panopto.viewer.disableSeekAndVsp=e,Panopto.viewer.disableSeekAndVsp?this.preventUserSeek():this.enableUserSeek())},i.prototype.render=function(){var t=this;$("#title").toggle(this.showTitle),$("#embed").toggleClass("show-interactivity","none"!==this.interactivity),this.player.toggleClass("audio-only",this.initParams.IsAudioOnly);var n=o.getProviderForUser(Panopto.user);n&&Panopto.GoogleAnalytics.sendEvent({source:"viewer-embed",action:"embedded-view",label:n}),this.configureGlobalControls(),this.configureSplashScreen();var i=new e.Viewer.AutoPlayDetector({muted:this.startMuted,playsInline:!0,autoPlayRequested:this.autoPlayRequested}).detect();if(this.initParams.ErrorCode)this.handleError();else if(this.delivery)if(this.isLiveBroadcast&&!this.delivery.activePrimary)this.showCallToAction({message:Panopto.GlobalResources.Embed_BroadcastNotStarted}),this.pollBroadcast(function(e){e.activePrimary&&location.reload()});else{if("none"!==this.interactivity&&this.configureEventsControl(),this.initializePlayer(),this.fullscreenEnabled&&this.configureFullscreenControls(),this.initializeQuotaTracker(),"undefined"!=typeof playerjs)Panopto.PlayerJsFlowplayerAdapter(this.flowplayer,{loadCallback:function(){t.loadVideo()}}).ready();this.flowplayer.one("ready",function(){if(t.videoElement=t.player.find("video.fp-engine")[0],t.configureFlowplayerControls(),t.configurePanoptoControls(),t.configureKeyHandler(),t.quizzes.length&&Panopto.user.userId&&(t.configureProgressListener(),t.configureQuizResultsController()),t.videoElement&&(_.each(t.videoElement.textTracks,function(e){e.mode="disabled"}),t.videoElement.textTracks.onaddtrack=function(e){e.track.mode="disabled"},t.isLiveBroadcast)){var e=!1;t.flowplayer.on("pause",function(){return e=!0});var o=!1;t.flowplayer.on("finish",function(){return o=!0}),document.addEventListener("visibilitychange",function(){document.hidden||!e||o||(t.flowplayer.load(t.flowplayer.conf.clip),e=!1)})}if(t.captionsAvailable&&t.toggleCaptions(t.captionsDisplayed),t.scormEnabled){var n={position:function(e){return t.flowplayer.seek(e)},reportPercentCompleted:t.reportPercentCompleted.bind(t)};t.scormControl=Panopto.Viewer.ScormControl(n,t.delivery.duration),t.updateScormProgress()}else t.startTime&&!t.flowplayer.engine.hls&&t.flowplayer.one("progress",function(){t.flowplayer.seek(t.startTime)})}),i.then(function(e){e&&t.playlistId||(t.initParams.ShowCopyrightNotice?t.copyrightNotice.showNotice(t.checkCopyrightNoticeRequirement.resolve):t.checkCopyrightNoticeRequirement.resolve()),e&&!t.playlistId?t.loadVideo():($("#playIconContainer").toggle(!t.isMobile),$("#splashPlayIconContainer").toggle(t.isMobile))}),this.eventOverlay&&this.flowplayer.on("progress",function(e,o,n){t.eventOverlay.setProps({currentTime:n})}),this.playlistId?this.flowplayer.on("finish",function(){return t.playlistOverlay.queueNextItem()}):this.delivery.nextDelivery&&this.flowplayer.on("finish",function(){return t.showNextDelivery()})}else this.initParams.ErrorCode=Panopto.Core.ErrorCode.InvalidDelivery,this.handleError();this.playlistId&&i.then(function(e){t.configurePlaylistOverlay(e)})},i.prototype.configureEventsControl=function(){var e=this;Panopto.Core.UI.Handlers.button($("#eventOverlayGutter .hit-target"),function(t,o){e.toggleEventOverlay(!e.eventOverlayShown,{keyboardInitiated:"mousedown"!==o.type}),e.eventOverlayShown&&e.hideMenus(),e.showControls(!e.eventOverlayShown,{ignorePlayState:!0})},{pointerEvent:"mousedown touchstart"});var t={delivery:this.delivery,userId:Panopto.user.userId,currentTime:0,isLandscape:this.isLandscape,isMobile:this.isMobile,isBroadcast:this.isLiveBroadcast,interactivity:this.interactivity,areSocialFeaturesEnabled:Panopto.features.areSocialFeaturesEnabled,areRatingsEnabled:Panopto.features.areRatingsEnabled,resources:Panopto.GlobalResources,onSeekRequested:function(t){Panopto.viewer.disableSeekAndVsp||(e.toggleEventOverlay(!1),e.showControls(i.playDisplayDuration),e.flowplayer.splash?(e.startTime=t,e.flowplayer.conf.hlsjs.startPosition=t,e.loadVideo()):e.seek(t,function(){return e.flowplayer.resume()}))},onKeyDown:function(t){t.which===n.Esc&&e.isLandscape&&e.eventOverlayShown&&(e.toggleEventOverlay(!1),e.showControls(i.controlDisplayDuration),$("#eventOverlay").one("transitionend",function(){$("#eventOverlayGutter .hit-target").focus()}))}};this.eventOverlay=new Panopto.Embed.EventOverlay($("#eventTabControl"),t)},i.prototype.toggleEventOverlay=function(e,t){var o=(void 0===t?{}:t).keyboardInitiated,n=void 0!==o&&o;"none"!==this.interactivity&&(this.eventOverlayShown=void 0!==e?e:!this.eventOverlayShown,$("#embed").toggleClass("event-overlay-shown",this.eventOverlayShown),this.eventOverlayShown?$("#eventOverlayGutter .hit-target").attr("aria-expanded","true"):$("#eventOverlayGutter .hit-target").removeAttr("aria-expanded"),this.isLandscape&&this.handleEventOverlayModeChanged({isOverlay:this.eventOverlayShown,keyboardInitiated:n}))},i.prototype.handleEventOverlayModeChanged=function(e){var t=e.isOverlay,o=e.keyboardInitiated,n=void 0!==o&&o;t?Panopto.Core.UI.Accessibility.trapFocus(this.eventOverlayElement):Panopto.Core.UI.Accessibility.releaseFocus(this.eventOverlayElement),t&&$("#eventOverlay").one("transitionend",function(){var e=$("#eventOverlay").find(":tabbable").first();e.focus(),n||(e.addClass("clicked"),e.one("blur",function(){return e.removeClass("clicked")}))})},i.prototype.initializePlayer=function(){var e={sources:[{type:this.initParams.MediaFileType===Panopto.Core.MediaFileType.hls?i.hlsMimeType:i.mp4MimeType,src:this.videoUrl}],live:this.isLiveBroadcast,vr:this.isVR};if(this.preferFlash){var t=_.extend({engine:"flash"},e.sources[0]);this.initParams.MediaFileType===Panopto.Core.MediaFileType.mp4&&this.initParams.RtmpServerUrl&&(e.rtmp=this.initParams.RtmpServerUrl,t={type:i.rtmpMimeType,src:this.initParams.RtmpRelativeUrl}),e.sources.unshift(t)}this.captionsAvailable&&(e.subtitles=[{kind:"subtitles",label:Panopto.GlobalResources.ModalPopup_SessionTranscriptDisplayName,src:this.initParams.CaptionUrl,srclang:"en"}],this.generateCaptionStylesheet());var o=-1!==window.location.search.indexOf("debuglog=true"),n={startLevel:-1,safari:!0,debug:o};this.startTime&&(n.startPosition=this.startTime);var a={};try{a=JSON.parse(Panopto.viewer.hlsJsConfig)}catch(e){window.console&&console.log("Error parsing HlsJsConfig setting, ignored.")}_.extend(n,a),this.flowplayer=flowplayer(this.player,{key:this.initParams.PlayerKey,swf:this.initParams.FlowplayerSwfPath,swfHls:this.initParams.FlowplayerHlsSwfPath,clip:e,splash:!0,ratio:!1,fullscreen:!1,native_fullscreen:!0,keyboard:!1,embed:!1,tooltip:!1,speeds:i.playbackSpeeds,hlsjs:n,vrvideo:{touchcontrols:!1,polyfill:!0,mode:this.initParams.VRType===Panopto.Core.MediaVRType.Full?"full":this.initParams.VRType===Panopto.Core.MediaVRType.Half?"half":void 0,renderOnPause:!0},debug:o}),this.flowplayer.conf.nativesubtitles=!1,this.player.toggleClass("mobile",this.isMobile),$("#player").find(".fp-elapsed, .fp-duration, .fp-remaining").appendTo("#hoverButtonContainer .flowplayer-time-display"),$("#overlay").prependTo(".fp-ui"),$("#hoverButtonContainer").appendTo(".fp-ui"),$("#playbackSpeedMenu").appendTo(".fp-player"),this.player.find(".fp-timeline-tooltip").appendTo(".fp-player"),$("#playlistOverlay").appendTo(".fp-player"),$(".fp-waiting").empty().append($("#loadingSpinner")).insertAfter(".fp-ui")},i.prototype.initializeQuotaTracker=function(){var t=this;Panopto.features.quotasEnabled&&(this.quotaPlaybackTracker=new e.Controls.QuotaPlaybackTracker(PanoptoCore.CookieHelpers,$("body"),Panopto.GlobalResources,this.deliveryId,this.delivery.ownerId,Panopto.user.userId,this.inviteId?Panopto.Core.StringHelpers.format(Panopto.freeTrialSignUpUrl+Panopto.Core.Constants.SignUpUrlParams,this.inviteId,this.delivery.user.email):Panopto.freeTrialSignUpUrl,Panopto.freeTrialSupportUrl),this.quotaPlaybackTracker.onToggle.add(function(e){e?t.flowplayer.pause():t.flowplayer.play()}),this.quotaPlaybackTracker.initialize(this.delivery.ownerIsOverQuota),this.flowplayer.on("finish",function(){t.quotaPlaybackTracker.fadeInModalForAnonymous()}))},i.prototype.generateCaptionStylesheet=function(){var e=document.head.appendChild(document.createElement("style")),t=$(window).height(),o=$(window).width(),n=t;(t>o||$.browser.mobile)&&(n=Math.min(t,o)/i.portraitVideoAspectRatio);var a=n/i.defaultHeight,r=i.defaultCaptionScaling*a,s=Panopto.captionSettings.size*r;s=Math.min(Math.max(s,i.minCaptionFontSize),i.maxCaptionFontSize);var l=Panopto.captionSettings.backgroundColor;"transparent"!==l&&(l=Panopto.Core.UI.Color.parse(l).toRGBa(Panopto.captionSettings.opacity)),e.sheet.insertRule("#player .fp-subtitle > *,#player .fp-captions > * {color: "+Panopto.captionSettings.color+";background: "+l+";text-shadow: "+Panopto.captionSettings.textShadow+";font-size: "+s+"px;}",0)},i.prototype.configureGlobalControls=function(){var e=this;Panopto.Core.UI.Handlers.button($("#appBackButton"),function(){window.location.href="panopto://close-player"}),$("#appBackButton").toggle(this.isIosApp),$("#embed").toggleClass("ios-app",this.isIosApp),Panopto.Core.UI.Handlers.button($("#playIconContainer"),function(){return e.loadVideo()}),Panopto.Core.UI.Handlers.button($("#fullViewerButton"),function(){e.isLiveBroadcast?e.flowplayer.mute(!0,!0):e.flowplayer.pause(),window.open(e.initParams.ViewerLink+"&start="+e.flowplayer.video.time)}),$("#fullViewerButton").toggle(!!this.showFullViewerLink),Panopto.Core.UI.Handlers.button($("#downloadButton"),function(){window.open(e.downloadUrl)}),$("#downloadButton").toggle(this.downloadEnabled)},i.prototype.configureSplashScreen=function(){var e=this;if(!this.initParams.IsAudioOnly){var t=this.initParams.ThumbUrl,o=function(e){return $("#splashScreen").css("background-image","url("+e+")")};o(t),$(new Image).on("error",function(){return o(e.defaultThumbnailUrl)}).prop("src",t)}if(Panopto.Core.UI.Handlers.button($("#splashPlayIconContainer"),function(){return e.loadVideo()},{pointerEvent:"mousedown touchstart"}),$("#splashScreen").click(function(t){e.menuOpen?(e.playlistOverlay&&e.playlistOverlay.hide(),t.preventDefault(),t.stopPropagation()):e.loadVideo()}),this.showBrand){var n=this.initParams.LogoUrl;n&&-1!==n.indexOf("_branding")&&($("#logo").attr("src",n),Panopto.viewer.showBrandWhilePlaying&&(this.watermark=new PanoptoViewer.WatermarkLogo(!1,n),$("#embed").append(this.watermark.getBrandElem())))}$("#cobrand").toggleClass("no-link",!Panopto.features.linkPoweredByPanoptoInEmbed),$("#cobrand a").click(function(e){return e.stopPropagation()})},i.prototype.configureFullscreenControls=function(){var e=this;Panopto.Core.UI.Handlers.button($("#fullScreenButton"),function(){e.toggleFullscreen()}),Panopto.Core.Browser.fullscreenEnabled?($("#fullScreenButton").show(),$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){var t=e.isFullscreen;$("#fullScreenIcon").toggle(!t),$("#fullScreenExitIcon").toggle(t)})):$.browser.iphone&&(this.flowplayer.on("fullscreen",function(){return e.handleNativeFullscreenToggled(!0)}),this.flowplayer.on("fullscreen-exit",function(){return e.handleNativeFullscreenToggled(!1)}))},Object.defineProperty(i.prototype,"isFullscreen",{get:function(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},enumerable:!0,configurable:!0}),i.prototype.toggleFullscreen=function(e){if(this.fullscreenEnabled&&e!==this.isFullscreen)if(e=void 0===e?!this.isFullscreen:e,Panopto.Core.Browser.fullscreenEnabled){var t=_.find(["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],function(e){return"function"==typeof document.documentElement[e]}),o=_.find(["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],function(e){return"function"==typeof document[e]});e?document.body[t]():document[o]()}else $.browser.iphone&&this.flowplayer.fullscreen()},i.prototype.handleNativeFullscreenToggled=function(e){if(this.nativeFullscreen=e,this.player.find("video").toggleClass("native-fullscreen",e),e)this.captionsDisplayed&&this.videoElement.textTracks.length&&(this.videoElement.textTracks[0].mode="showing");else{var t=!1;_.each(this.videoElement.textTracks,function(e){"showing"===e.mode&&(t=!0),e.mode="disabled"}),this.captionsAvailable&&this.toggleCaptions(t)}},i.prototype.updateBroadcast=function(e){var t=this;if(this.delivery=e,$("#broadcastStatusWrapper").toggle(e.broadcastEnded),e.broadcastEnded)$("#broadcastStatus").text(e.broadcastInterrupted?Panopto.GlobalResources.Embed_BroadcastInterrupted:Panopto.GlobalResources.Embed_BroadcastEnded);else if(e.activePrimary){var o=this.ensureMobileCompatibleManifest(e.activePrimary.url);if(o!==this.videoUrl){this.videoUrl=o;var n=this.flowplayer.conf.clip;_.each(n.sources,function(e){e.src=o}),this.flowplayer.load(n,function(){t.loggerSeekHandler&&t.loggerSeekHandler()})}}},i.prototype.loadVideo=function(){var e=this;this.checkCopyrightNoticeRequirement.then(function(){e.invocationRequested||(e.invocationRequested=!0,e.createInvocation(function(t){t&&(e.invocationId=t,e.delivery.activePrimary&&e.attachPlaybackLogger())}),e.flowplayer.load(),$("#splashScreen").hide(),$("#gradientTop, #gradientBottom").insertAfter($("#splashScreen")),$.browser.iphone&&$("#fullScreenButton").toggle(e.fullscreenEnabled),$("#playIconContainer").off("click keydown").attr("tabindex",null).fadeOut(500),e.showControls(i.playDisplayDuration),e.isLiveBroadcast&&e.pollBroadcast(function(t){return e.updateBroadcast(t)}))})},i.prototype.createInvocation=function(e){var t=this,o=Panopto.Core.InvocationType.None;o=this.isIosApp?this.isLiveBroadcast?Panopto.Core.InvocationType.MobileApplicationBroadcast:Panopto.Core.InvocationType.MobileApplication:this.isAndroidApp?this.isLiveBroadcast?Panopto.Core.InvocationType.AndroidApplicationBroadcast:Panopto.Core.InvocationType.AndroidApplication:this.isLiveBroadcast?Panopto.Core.InvocationType.EmbedBroadcast:Panopto.Core.InvocationType.EmbedViewer;var n={deliveryId:this.deliveryId,inviteId:this.inviteId,invocationType:o};Panopto.viewer.ultraHighScaleAnonymousWebcastMode?e():Panopto.Util.callWebMethod({methodName:"CreateInvocation",serviceURL:Panopto.appRoot+"/Services/Data.svc",params:n,onSuccess:function(t){return e(t)},onFailure:function(o){403===o._statusCode?location.replace(t.loginUrl):e()},loadingIndicator:""})},i.prototype.attachPlaybackLogger=function(){var t=this,o={position:function(){var o=e.Viewer.Constants.NativePositionFallbackRegion,n=t.flowplayer.video.time||0;return n>o&&t.videoElement&&t.videoElement.currentTime<o&&(n=t.videoElement.currentTime),n},playSpeed:function(){return t.flowplayer.currentSpeed},streamId:function(){return t.delivery.activePrimary.id},onSeek:function(e){t.loggerSeekHandler=e},offSeek:function(){t.loggerSeekHandler=void 0},onSpeedChange:function(e){t.loggerSpeedChangeHandler=e},offSpeedChange:function(){t.loggerSpeedChangeHandler=void 0},onPlayStateChangeLog:function(e){t.loggerPlayStateChangeHandler=e},offPlayStateChangeLog:function(){t.loggerPlayStateChangeHandler=void 0}},n=Panopto.viewer.ultraHighScaleAnonymousWebcastMode?$.noop:Panopto.Core.ServiceInterface.AnalyticsIngest.addStreamRequests,i=Panopto.Core.Analytics.PlaybackLogger(o,this.invocationId,n,{onSpanUpdated:function(e){t.quotaPlaybackTracker&&t.quotaPlaybackTracker.update(e)}}),a=function(){i.start(),t.isLiveBroadcast&&t.flowplayer.one("progress",function(){t.loggerSeekHandler&&t.loggerSeekHandler()})};this.flowplayer.on("seek",function(){t.loggerSeekHandler&&t.loggerSeekHandler()}),this.flowplayer.on("pause",function(){var o=t.flowplayer.video.time>=t.flowplayer.video.duration-e.Viewer.Constants.EndPositionThreshold?Panopto.Core.ViewerPlayState.Stopped:Panopto.Core.ViewerPlayState.Paused;t.loggerPlayStateChangeHandler&&t.loggerPlayStateChangeHandler(Panopto.Core.ViewerPlayState.Playing,o)}),this.flowplayer.on("resume",function(){t.flowplayer.video.time<t.flowplayer.video.duration&&t.loggerPlayStateChangeHandler&&t.loggerPlayStateChangeHandler(Panopto.Core.ViewerPlayState.Paused,Panopto.Core.ViewerPlayState.Playing)}),this.flowplayer.on("stop",function(){t.loggerPlayStateChangeHandler&&t.loggerPlayStateChangeHandler(void 0,Panopto.Core.ViewerPlayState.Stopped)}),this.flowplayer.ready?a():this.flowplayer.one("ready",function(){return a()})},i.prototype.configureFlowplayerControls=function(){var e,t,o=this,n=this.player.find(".fp-timeline"),a=this.player.find(".fp-timeline-tooltip");this.player.add($("#embed #eventOverlayGutter")).on("mousemove",function(n){void 0===e||n.pageX===e&&n.pageY===t||o.eventOverlayShown&&o.isLandscape||o.showControls(i.controlDisplayDuration),e=n.pageX,t=n.pageY}).on("focusin",function(){return o.showControls(i.controlDisplayDuration)}).on("mouseleave",function(){if(o.autoHideEnabled){var e=!o.autoHideRequested;o.showControls(!1,{slowFade:!0,ignorePlayState:e})}}),this.flowplayer.on("resume",function(){return o.showControls(i.playDisplayDuration)}),this.player.find(".fp-player").on("touchmove touchend",function(){return o.showControls(i.controlDisplayDuration)}),this.isMobile||n.hover(function(){o.menuOpen||a.show()},function(){a.hide()}),n.attr({tabindex:1,role:"slider","aria-valuemin":0,"aria-valuemax":Math.round(this.flowplayer.video.duration),"aria-valuenow":Math.round(this.flowplayer.video.time),"aria-label":Panopto.GlobalResources.Embed_Timeline}),this.flowplayer.on("progress",function(){n.attr("aria-valuenow",Math.round(o.flowplayer.video.time))}),Panopto.viewer.disableSeekAndVsp&&this.preventUserSeek(),this.isVR&&this.configureVRControls()},i.prototype.configureVRControls=function(){var e,t,o=this;this.player.find(".fp-ui").mousedown(function(o){e=o.pageX,t=o.pageY}).click(function(n){!(n.which===Panopto.Core.MouseButton.Left&&e===n.pageX&&t===n.pageY)||o.isLiveBroadcast||o.isMobile||o.togglePlayState()}),this.player.find(".fp-timeline").click(function(e){return e.stopPropagation()})},i.prototype.configurePanoptoControls=function(){var e=this;this.player.find(".touch-overlay").on("touchend click",function(t){e.showControls(i.controlDisplayDuration),"touchend"===t.type?(t.preventDefault(),t.stopPropagation()):e.togglePlayState()}),$("#overlay, #title, #gradientTop, #gradientBottom").on("click touchend",function(t){var o=t.target!==t.currentTarget;o||e.menuOpen||e.isLiveBroadcast||e.isMobile||e.togglePlayState(),!o&&e.isMobile&&e.showControls(!1,{ignorePlayState:!0}),t.stopPropagation()}).dblclick(function(t){t.target!==t.currentTarget||e.isMobile||e.toggleFullscreen()}).mousedown(function(e){return e.preventDefault()});var t=this.player.find(".mobile-transport-controls .play, .bottom-transport-controls");Panopto.Core.UI.Handlers.button(t,function(){return e.togglePlayState()},{pointerEvent:"mousedown touchstart"});var o=function(){var o=Panopto.GlobalResources[e.player.is(".is-playing")?"Embed_Tooltip_Pause":"Embed_Tooltip_Play"];t.attr({title:o,"aria-label":o})};this.flowplayer.on("pause resume stop",function(){return o()}),o(),Panopto.Core.UI.Handlers.button($("#player .mobile-transport-controls .skip-back").add($("#player .bottom-transport-controls .skip-back")),function(){e.seek(Math.max(e.flowplayer.video.time-10,0))},{pointerEvent:"mousedown touchstart"}),Panopto.Core.UI.Handlers.button($("#player .mobile-transport-controls .skip-forward"),function(){e.seek(Math.min(e.flowplayer.video.time+10,e.flowplayer.video.duration))},{pointerEvent:"mousedown touchstart"}),this.configureVolumeControls(),Panopto.Core.UI.Handlers.button($("#captionsButton"),function(){e.activateCaptionsToggle()}),$("#captionsButton").toggle(this.captionsAvailable),(this.downloadEnabled||this.showFullViewerLink)&&(this.captionsAvailable||this.vspSupported||this.fullscreenEnabled)&&$("#divider").show(),_.each(i.menus,function(t){Panopto.Core.UI.Handlers.button($(t.buttonSelector),function(o,n){e.toggleMenu(t);var a=$(t.menuSelector).find("."+i.selectedClass);$(o).is(".on")&&a.length&&(e.focusMenuItem(a),a.toggleClass(i.clickedClass,"click"===n.type))})}),this.player.click(function(t){_.each(i.menus,function(o){$(t.target).closest(o.menuSelector).length||e.toggleMenu(o,!1)}),e.playlistOverlay&&!$(t.target).closest("#playlistOverlay").length&&e.playlistOverlay.hide(),t.preventDefault(),t.stopPropagation()}),this.vspSupported&&this.configurePlaybackSpeedControls()},i.prototype.configureVolumeControls=function(){var e=this;this.configureMuteButton(),this.isMobile?i.flowplayerGlobal.support.volume&&this.toggleMuted(this.startMuted):this.configureVolumeSlider(),this.flowplayer.on("volume",function(){var t=100*e.flowplayer.volumeLevel;PanoptoCore.CookieHelpers.setUserCookieField(Panopto.user.userKey,i.volumeCookieKey,t)})},i.prototype.configureMuteButton=function(){var e=this;Panopto.Core.UI.Handlers.button($("#muteButton"),function(){return e.toggleMuted()}),$("#muteButton").show();var t=function(){var t=Panopto.GlobalResources[e.flowplayer.muted?"Embed_Unmute":"Embed_Mute"];$("#muteButton").attr("title",t),$("#muteButton").attr("aria-label",t)};this.flowplayer.on("mute",function(){return t()}),t()},i.prototype.toggleMuted=function(e){e=void 0===e?!this.flowplayer.muted:!!e,this.isMobile&&!e?this.flowplayer.volume(i.maxVolume/100):this.flowplayer.mute(e)},i.prototype.configureVolumeSlider=function(){var e=this;Panopto.Core.UI.Handlers.hoverOrDrag($("#volumeControls"),function(t){e.player.toggleClass("volume-active",t)});var t=$("#volumeSlider");t.slider({min:0,max:100,step:1,orientation:"horizontal",slide:function(e,t){return o(t.value,{updateSlider:!1})}}),t.find("a.ui-slider-handle").attr("tabindex",i.controlButtonTabindex),this.flowplayer.on("volume",function(){var t=100*e.flowplayer.volumeLevel;o(t,{updatePlayer:!1})});var o=function(o,n){var i=void 0===n?{}:n,a=i.updateSlider,r=void 0===a||a,s=i.updatePlayer,l=void 0===s||s;r&&t.slider("value",o),l&&(e.flowplayer.volume(o/100),0===o&&e.flowplayer.mute(!0)),$("#volumeLevel").css("width",o+"%")};o(this.initialVolume),Panopto.Core.UI.Accessibility.slider(t,function(e){return Panopto.GlobalResources.ViewerPlus_ARIA_PercentValue.format(e)},Panopto.GlobalResources.Embed_Volume)},i.prototype.configurePlaybackSpeedControls=function(){var e=this,t=_.template($("#playbackSpeedTemplate").html());_.each(i.playbackSpeeds,function(o){var n=$(t({speed:o,displaySpeed:e.getDisplaySpeed(o)}));n.insertAfter($("#playbackSpeedTemplate")),1===o&&n.toggleClass(i.selectedClass),Panopto.Core.UI.Handlers.button(n,function(t,o){e.setSpeed($(t).data("speed")),e.toggleMenu(i.menus.playbackSpeed,!1),$("#playbackSpeedButton").focus().toggleClass(i.clickedClass,"click"===o.type)})}),Panopto.Core.UI.Handlers.key($("#playbackSpeedMenu, #playbackSpeedButton"),function(t,o){e.showControls(i.controlDisplayDuration);var a=_.contains([n.RightArrow,n.UpArrow],o.which);if($(t).is("#playbackSpeedMenu")){var r=$(document.activeElement)[a?"prev":"next"](".item");r.length&&e.focusMenuItem(r)}else e.setSpeed(a)},[n.UpArrow,n.DownArrow,n.LeftArrow,n.RightArrow],{preserveExisting:!0}),$("#playbackSpeedButton").show(),this.flowplayer.on("speed",function(){return e.displaySpeed(e.flowplayer.currentSpeed)})},i.prototype.configureKeyHandler=function(){var e=this;$(document).on("keydown",function(t){if(!($(t.target).closest("#eventOverlay").length||(e.showControls(i.controlDisplayDuration),t.ctrlKey||t.metaKey||t.altKey))){var o=!1,a=t.which;switch(a){case n.Space:e.isLiveBroadcast||e.togglePlayState();break;case n.Home:case n.End:e.seekTo(a===n.Home?0:10);break;case n.UpArrow:case n.DownArrow:case n.LeftArrow:case n.RightArrow:var r=_.contains([n.RightArrow,n.LeftArrow],a),s=_.contains([n.RightArrow,n.UpArrow],a);if(t.shiftKey&&r&&e.vspSupported)e.setSpeed(s);else if(!t.shiftKey){var l=$(t.target).hasClass("fp-timeline");if(r||l)e.seek(s);else if(!r){var c=s?.1:-.1;e.flowplayer.volume(e.flowplayer.volumeLevel+c)}}break;case n.Zero:case n.One:case n.Two:case n.Three:case n.Four:case n.Five:case n.Six:case n.Seven:case n.Eight:case n.Nine:e.seekTo(a-n.Zero);break;case n.Period:e.seekTo();break;case n.M:e.flowplayer.mute();break;case n.F:e.toggleFullscreen();break;case n.C:e.captionsAvailable&&e.activateCaptionsToggle();break;case n.Esc:e.menuOpen?(e.hideMenus(),e.playlistOverlay&&e.playlistOverlay.hide(),e.showControls(i.controlDisplayDuration)):e.autoHideEnabled?e.showControls(!1,{ignorePlayState:!0}):Panopto.Core.ElementHelpers.blurActiveElement();break;default:o=!0}o||t.preventDefault()}})},i.prototype.configureOrientationListener=function(){var e=this,t="orientation"in window.screen&&"type"in window.screen.orientation&&"onchange"in window.screen.orientation,o=function(){e.isLandscape=$.browser.mobile?t?0===window.screen.orientation.type.indexOf("landscape"):90===Math.abs(Number(window.orientation)):window.innerWidth>window.innerHeight,e.setLayoutOrientation(e.isLandscape),e.eventOverlay&&e.eventOverlay.setProps({isLandscape:e.isLandscape}),$.browser.android&&$.browser.chrome&&e.toggleFullscreen(e.isLandscape)};$.browser.mobile?t?window.screen.orientation.addEventListener("change",o):window.addEventListener("orientationchange",o):window.addEventListener("resize",o),o()},i.prototype.setLayoutOrientation=function(e){$("#eventOverlay").addClass("no-animation"),$("#embed").toggleClass("landscape",e),this.player[0].offsetHeight,$("#eventOverlay").removeClass("no-animation"),this.eventOverlayShown&&this.handleEventOverlayModeChanged({isOverlay:e})},i.prototype.configureProgressListener=function(){var t=this,o=0;this.flowplayer.on("progress",function(n,i,a){if(a!==o){var r=e.Viewer.Logic.ContentLogic.getBlockingContent(t.quizzes,a);i.seeking||r||(r=e.Viewer.Logic.ContentLogic.getPausingContent(t.quizzes,o,a)),r&&t.showQuiz(r),o=a}})},i.prototype.showQuiz=function(e){var o=this;if(!this.quizPlayer){this.toggleEventOverlay(!1),this.nativeFullscreen&&(this.videoElement.webkitExitFullScreen(),this.nativeFullscreen=!1),this.player.toggleClass(i.quizLoadingClass,!0);var n=e.timeline[0];this.flowplayer.video.time!==n&&this.flowplayer.seek(n);var a=$.Deferred();this.flowplayer.seeking?this.flowplayer.one("seek",function(){o.flowplayer.pause(a.resolve)}):this.flowplayer.pause(a.resolve),a.then(function(){o.quizPlayer=new t.QuizPlayer(e,{container:$("#quizContainer"),userId:Panopto.user.userId,invocationId:o.invocationId}),o.quizPlayer.toggle(!1),o.quizPlayer.loadedCallback.add(function(){o.player.toggleClass(i.quizLoadingClass,!1),o.quizPlayer.toggle(!0)}),o.quizPlayer.render()})}},i.prototype.getSeekPositionAfterQuiz=function(e){var t=e.timeline[0];return"flash"===this.flowplayer.engine.engineName?t=Math.ceil(t/i.flowplayerFlashSeekableIncrement)*i.flowplayerFlashSeekableIncrement+i.flowplayerFlashSeekableOffset:t+=i.quizSeekOffset,t},i.prototype.configureQuizResultsController=function(){var t=this;this.quizResultsController=new e.Viewer.QuizResultsController(this.quizzes,this.ltiOutcomeConfig),this.quizResultsController.onQuizCompleted(function(e){t.quizPlayer.remove(),t.quizPlayer=null,t.flowplayer.seek(t.getSeekPositionAfterQuiz(e),function(){setTimeout(function(){return t.flowplayer.resume()},0)})}),this.quizResultsController.onQuizClosed(function(e){if(t.quizPlayer.remove(),t.quizPlayer=null,e.isSessionPlaybackBlocking){var o=e.timeline[0]-i.quizSeekOffset;o<0&&(o=0),t.flowplayer.seek(o)}else t.flowplayer.seek(t.getSeekPositionAfterQuiz(e),function(){return t.flowplayer.resume()})})},i.prototype.togglePlayState=function(e){void 0===e&&(e=!this.flowplayer.playing),e!==this.flowplayer.playing&&(this.player.toggleClass("is-playing",e),this.player.toggleClass("is-paused",!e),$("#playIcon").toggle(e),$("#pauseIcon").toggle(!e),$("#playIconContainer").finish().show().fadeOut(i.playIconPulseDuration),e?this.flowplayer.resume():this.flowplayer.pause())},i.prototype.seek=function(e,t){Panopto.viewer.disableSeekAndVsp?t&&t():this.flowplayer.seek(e,t)},i.prototype.seekTo=function(e){Panopto.viewer.disableSeekAndVsp||this.flowplayer.seekTo(e)},i.prototype.showControls=function(e,t){var o=this,n=void 0===t?{}:t,i=n.slowFade,a=void 0!==i&&i,r=n.ignorePlayState,s=void 0!==r&&r,l=!!e||_.isUndefined(e);if(!this.menuOpen&&(this.flowplayer.playing||l||s)){var c=function(){o.player.toggleClass("is-mouseover",l),o.player.toggleClass("is-mouseout",!l),!o.flowplayer.splash&&$("#embed").toggleClass("overlay-controls",l),o.watermark&&(l?(clearTimeout(o.logoTimeout),o.watermark.setHeight(75)):o.logoTimeout=window.setTimeout(function(){o.watermark.setHeight(0)},500))};!l&&a?(this.player.add($("#embed")).addClass("slow-fade"),c(),this.player[0].offsetHeight,this.player.add($("#embed")).removeClass("slow-fade")):c(),clearTimeout(this.controlsHideTimeoutId),this.autoHideEnabled&&"number"==typeof e&&(this.controlsHideTimeoutId=window.setTimeout(function(){return o.showControls(!1,{slowFade:!0})},e))}},i.prototype.toggleMenu=function(e,t){t=void 0===t?!$(e.menuSelector).is(".shown"):!!t,$(e.menuSelector).toggleClass("shown",t),$(e.buttonSelector).toggleClass("on",t),this.menuOpen=t},i.prototype.hideMenus=function(){var e=this;_.each(i.menus,function(t){return e.toggleMenu(t,!1)})},i.prototype.focusMenuItem=function(e){e.parent().find(".item").attr("tabindex",-1),e.attr("tabindex",i.controlButtonTabindex),e.focus()},i.prototype.activateCaptionsToggle=function(){this.toggleCaptions(),PanoptoCore.CookieHelpers.setUserCookieField(Panopto.user.userKey,i.captionsCookieKey,this.captionsDisplayed),this.initParams.IsAudioOnly&&this.autoHideEnabled&&this.showControls(i.playDisplayDuration)},i.prototype.toggleCaptions=function(t){this.captionsDisplayed=void 0===t?!this.captionsDisplayed:t,$("#captionsButton").toggleClass("on",this.captionsDisplayed).toggleClass("off",!this.captionsDisplayed).prop("title",this.captionsDisplayed?Panopto.GlobalResources.Embed_Tooltip_HideCaptions:Panopto.GlobalResources.Embed_Tooltip_ShowCaptions);var o="";this.captionsDisplayed?(this.flowplayer.loadSubtitles(0),o=e.ImageHelpers.getImageUrl("Viewer/closed-caption.svg")):(this.flowplayer.disableSubtitles(),o=e.ImageHelpers.getImageUrl("Viewer/closed-caption-outline.svg")),$("#captionSvg").replaceWith('<img class="material-icons" id="captionSvg" src="'+o+'" onload="SVGInject(this)" />')},i.prototype.setSpeed=function(e){var t=this;if("boolean"==typeof e){var o=_.indexOf(i.playbackSpeeds,this.flowplayer.currentSpeed),n=o+(e?1:-1),a=n>=0&&n<i.playbackSpeeds.length;e=i.playbackSpeeds[a?n:o]}if(this.preferFlash&&"flash"===this.flowplayer.engine.engineName&&1!==e||this.vspSourceOverrideActive&&1===e){this.vspSourceOverrideActive=!this.vspSourceOverrideActive,this.flowplayer.conf.clip.sources.reverse();var r=this.flowplayer.video.time;this.flowplayer.load(this.flowplayer.conf.clip,function(){t.flowplayer.seek(r),t.flowplayer.speed(e),t.vspSourceOverrideActive||(t.displaySpeed(1),t.flowplayer.currentSpeed=1)})}else this.flowplayer.speed(e);this.loggerSpeedChangeHandler&&this.loggerSpeedChangeHandler()},i.prototype.displaySpeed=function(e){$("#playbackSpeedButton .selected-value").text(this.getDisplaySpeed(e)),$("#playbackSpeedMenu ."+i.selectedClass).removeClass(i.selectedClass),$("#playbackSpeedMenu [data-speed='"+e+"']").addClass(i.selectedClass)},i.prototype.getDisplaySpeed=function(e){var t=Number(e).toLocaleString(Panopto.lang);return Panopto.GlobalResources.Embed_PlaybackSpeedFormat.format(t)},i.prototype.showNextDelivery=function(){var e=this,t=$("#nextDelivery"),n={url:o.setQueryParameters(location.href,{id:this.delivery.nextDelivery.id,autoplay:!0}),title:this.delivery.nextDelivery.title,description:this.delivery.nextDelivery.description,duration:this.delivery.nextDelivery.duration,thumbUrl:this.delivery.nextDelivery.thumbUrl,folderName:this.delivery.folder.name};if(n.url){t.show(),this.player.hide(),Panopto.Core.UI.Components.nextDelivery(t,n,Panopto.GlobalResources.NextDelivery_NextVideo,Panopto.GlobalResources.NextDelivery_PlayAgain,function(){e.player.show(),t.hide(),e.flowplayer.play()});var i=($(window).height()-t.height())/2;t.css({"padding-top":i+"px","padding-bottom":i+"px"})}},i.prototype.handleError=function(){var e=this;switch(this.initParams.ErrorCode){case Panopto.Core.ErrorCode.SiteDisabled:this.showErrorMessage(Panopto.GlobalResources.Embed_SiteDisabled);break;case Panopto.Core.ErrorCode.LoginRequired:this.showCallToAction({link:{id:"loginLink",url:this.loginUrl,text:Panopto.GlobalResources.Embed_LoginMessage}});break;case Panopto.Core.ErrorCode.AccessRequired:this.showCallToAction({message:Panopto.GlobalResources.Embed_RequestAccess,link:{id:i.requestAccessLinkId,url:"#",text:Panopto.GlobalResources.Embed_RequestAccessLink}}),Panopto.Core.UI.Handlers.button($("#"+i.requestAccessLinkId),function(){return e.requestAccess()});break;case Panopto.Core.ErrorCode.NotInAvailabilityWindow:this.showCallToAction({message:Panopto.GlobalResources.Embed_NotInAvailabilityWindow,link:{id:"availabilityLink",url:this.sessionListUrl,target:"_blank",text:Panopto.GlobalResources.ViewerPlus_WatchSomethingElse}});break;case Panopto.Core.ErrorCode.NetworkAccessDenied:this.showCallToAction({message:Panopto.viewer.networkAccessDeniedMessage});break;case Panopto.Core.ErrorCode.PodcastRequired:this.showFullViewerLink?this.showCallToAction({message:Panopto.GlobalResources.Embed_VideoNotReady,link:{id:"viewerLink",url:this.initParams.ViewerLink,target:"_blank",text:Panopto.GlobalResources.Embed_VideoNotReadyViewIt}}):this.showCallToAction({message:Panopto.GlobalResources.Embed_VideoNotReady.format("")});break;case Panopto.Core.ErrorCode.InvalidUrl:this.showErrorMessage(Panopto.GlobalResources.Embed_InvalidUrl);break;case Panopto.Core.ErrorCode.InvalidDelivery:this.showErrorMessage(Panopto.GlobalResources.Embed_InvalidDelivery);break;case Panopto.Core.ErrorCode.InvalidPlaylist:case Panopto.Core.ErrorCode.InvalidPlaylistUrl:this.showErrorMessage(Panopto.GlobalResources.Embed_InvalidPlaylist);break;case Panopto.Core.ErrorCode.InvalidPlaylistNoSessions:this.showErrorMessage(Panopto.GlobalResources.Embed_PlaylistHasNoViewableSessions);break;case Panopto.Core.ErrorCode.HasPendingMergeOrCopyJobs:this.showErrorMessage(Panopto.GlobalResources.Embed_HasPendingMergeOrCopyJobs);break;case Panopto.Core.ErrorCode.UnknownError:default:this.showErrorMessage(Panopto.GlobalResources.Embed_UnknownError)}},i.prototype.showErrorMessage=function(e){this.player.hide(),$("#errorMessageWrapper").show(),$("#errorMessage").text(e)},i.prototype.showCallToAction=function(e){if($("#embed").addClass("is-call-to-action"),e.link){e.message=e.message||"{0}",e.link.target=e.link.target||"_self";var t=_.template($("#callToActionLinkTemplate").html())(e.link),o=String.format(e.message,t);$("#callToAction").html(o)}else $("#callToAction").text(e.message)},i.prototype.appendDiagnostics=function(e){$("#diagnostics").append(e).show()},i.prototype.requestAccess=function(){var e=this,t={deliveryId:this.deliveryId},o=function(){e.showCallToAction({message:Panopto.GlobalResources.Embed_RequestAccessFailure,link:{id:i.requestAccessLinkId,url:"#",text:Panopto.GlobalResources.Embed_RequestAccessFailureTryAgain}}),Panopto.Core.UI.Handlers.button($("#"+i.requestAccessLinkId),function(){return e.requestAccess()})};Panopto.Util.callWebMethod({methodName:"RequestAccess",serviceURL:Panopto.appRoot+"/Services/Data.svc",params:t,onSuccess:function(t){t?e.showCallToAction({message:Panopto.GlobalResources.Embed_RequestAccessSuccess}):o()},onFailure:function(){return o()},loadingIndicator:""})},i.prototype.pollBroadcast=function(e){var t=this;setTimeout(function(){t.getDeliveryInfo({deliveryId:t.deliveryId,inviteId:t.inviteId,invocationId:t.invocationId,isBroadcast:!0}).then(function(o){t.broadcastPingInterval=o.broadcastRefreshInterval,e(o)}).always(function(){t.pollBroadcast(e)})},this.broadcastPingInterval)},i.prototype.configurePlaylistOverlay=function(t){var n=this;$("#overlay").addClass("playlist-mode");var a=!this.playlistAdvance;this.playlistOverlay=new e.Core.UI.Components.PlaylistOverlay($("#playlistOverlay"),$("#playlistButton"),this.playlistId,this.playlistDeliveryId,e.Core.UI.Components.PlaylistOverlaySkin.Embedded,{includeEmbedViewableOnly:!0},a,t&&!this.initParams.ErrorCode,new e.Core.API.Rest.PlaylistWithSessionsService),this.playlistOverlay.onPlayItem(function(e){if(e===n.deliveryId)n.initParams.ErrorCode||("pending"!==n.checkCopyrightNoticeRequirement.state()||n.copyrightNotice.isShowingNotice()||(n.initParams.ShowCopyrightNotice?n.copyrightNotice.showNotice(n.checkCopyrightNoticeRequirement.resolve):n.checkCopyrightNoticeRequirement.resolve()),n.flowplayer.splash?n.loadVideo():n.flowplayer.resume());else{var t=o.setQueryParameters(location.href,{pid:n.playlistId,id:e,advance:!0});location.replace(t)}});var r=function(e){n.menuOpen&&n.hideMenus(),n.eventOverlayShown&&n.toggleEventOverlay(!1),e?n.showControls(!1,{ignorePlayState:!0}):n.showControls(i.controlDisplayDuration),$("#embed").toggleClass("overlay-controls",!e),n.menuOpen=e,$("#appBackButton").toggle(!e&&n.isIosApp),$("#title").toggle(!e&&n.showTitle),n.flowplayer.splash&&($("#logoContainer").toggle(!e),$("#playIconContainer").toggle(!e&&!n.isMobile),$("#splashPlayIconContainer").toggle(!e&&n.isMobile))};this.playlistOverlay.onToggle(function(e){return r(e)}),r(a),$("#playlistOverlay").on("click touchend",function(e){return e.stopPropagation()})},i.prototype.ensureMobileCompatibleManifest=function(e){var t=/_hlsbc/i.test(e),o=new RegExp(Panopto.viewer.mobileBroadcastUserAgentRegex,"i").test(navigator.userAgent);return this.isLiveBroadcast&&t&&o&&(e=e.replace("master.m3u8","master2.m3u8")),e},i.prototype.updateScormProgress=function(){var t=this;setInterval(function(){t.scormControl.updateProgress(t.flowplayer.video.time)},e.Viewer.Constants.TimedSyncRate)},i.prototype.enableUserSeek=function(){this.player.removeClass(i.seekDisabledClass),this.player.find(".fp-timeline").attr("tabindex",0)},i.prototype.preventUserSeek=function(){var e=this;if(this.player.addClass(i.seekDisabledClass),this.player.find(".fp-timeline").removeAttr("tabindex"),$.browser.iphone){var t=this.videoElement.currentTime;this.videoElement.addEventListener("timeupdate",function(){e.videoElement.seeking||(t=e.videoElement.currentTime)}),this.videoElement.addEventListener("seeking",function(){e.videoElement.currentTime!==t&&e.nativeFullscreen&&(e.videoElement.currentTime=t)}),this.videoElement.addEventListener("ended",function(){t=0})}},i.hlsMimeType="application/x-mpegurl",i.mp4MimeType="video/mp4",i.rtmpMimeType="video/flash",i.captionsCookieKey="embedCaptions",i.volumeCookieKey="defaultEmbedVolume",i.maxVolume=100,i.requestAccessLinkId="requestAccessLink",i.defaultHeight=405,i.hoverCaptionsMinHeight=175,i.controlDisplayDuration=3e3,i.playDisplayDuration=500,i.playIconPulseDuration=750,i.quizSeekOffset=.5,i.controlButtonTabindex=2,i.portraitVideoAspectRatio=16/9,i.defaultCaptionScaling=2/3,i.minCaptionFontSize=16,i.maxCaptionFontSize=36,i.menus={playbackSpeed:{buttonSelector:"#playbackSpeedButton",menuSelector:"#playbackSpeedMenu"}},i.playbackSpeeds=PanoptoCore.mapEnum(PanoptoViewer.PlaySpeed,function(e,t){return t}),i.clickedClass=Panopto.Core.Constants.ClickedClass,i.selectedClass=Panopto.Core.Constants.SelectedClass,i.quizLoadingClass="quiz-loading",i.seekDisabledClass="no-seek",i.broadcastPingInterval=1e4,i.flowplayerGlobal=flowplayer,i.flowplayerFlashSeekableIncrement=3,i.flowplayerFlashSeekableOffset=.25,i}();t.EmbeddedViewer=i}(e.Embed||(e.Embed={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){var t=PanoptoCore.VoidCallback,o=function(){function e(e,o){this.quiz=e,this._loadedCallback=new t,this.visible=!0,this.container=o.container,this.url=String.format(this.quiz.url,o.userId,o.invocationId)+"&embedded=true"}return Object.defineProperty(e.prototype,"loadedCallback",{get:function(){return this._loadedCallback},enumerable:!0,configurable:!0}),e.prototype.toggle=function(e){this.visible=e,this.iframe&&this.iframe.toggle(e)},e.prototype.render=function(){var t=this;this.iframe=$(e.template(this.quiz)).appendTo(this.container),this.iframe.toggle(this.visible),this.iframe.on("load",function(){return t._loadedCallback.fire()}),this.iframe.prop("src",this.url)},e.prototype.remove=function(){this.iframe.remove()},e.template=_.template('<iframe class="quiz-player"></iframe>'),e}();e.QuizPlayer=o}(e.Embed||(e.Embed={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){var t=function(){function e(e){var t=void 0===e?{}:e,o=t.muted,n=void 0!==o&&o,i=t.playsInline,a=void 0!==i&&i,r=t.autoPlayRequested,s=void 0===r||r;this.muted=n,this.playsInline=a,this.autoPlayRequested=s}return e.prototype.detect=function(){var t=$.Deferred(),o=new RegExp(Panopto.viewer.autoPlayWhitelistRegex).test(navigator.userAgent),n=new RegExp(Panopto.viewer.autoPlayBlacklistRegex).test(navigator.userAgent);if(!this.autoPlayRequested||n)t.resolve(!1);else if(o)t.resolve(!0);else{var i=$('<video class="'+e.videoElementClass+'">').prependTo("body"),a=i[0];a.src=e.dummyMp4WithAudio,a.muted=this.muted,a.playsInline=this.playsInline;var r=a.play();"Promise"in window&&r instanceof Promise?r.then(function(){return t.resolve(!0)}).catch(function(e){return t.resolve(!1)}):t.resolve(!$.browser.mobile),t.then(function(){a.src="",a.load(),i.remove()})}return t.promise()},e.videoElementClass="auto-play-detector",e.dummyMp4WithAudio="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=",e}();e.AutoPlayDetector=t}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),(Panopto=Panopto||{}).Core=Panopto.Core||{},Panopto.Viewer=Panopto.Viewer||{},Panopto.GlobalResources=Panopto.GlobalResources||{},function(e){!function(t){var o=function(){function e(){}return e.TimedSyncRate=30,e.ControlSyncRate=1e3,e.SecondarySyncThreshold=1,e.SecondarySyncTargetSeconds=.4,e.SecondarySynchronizingUpdateRateMillis=50,e.InitialSecondaryThreshold=5,e.SecondaryStreamOffset=1.5,e.MinSegmentGap=1,e.ContiguousSegmentThreshold=.2,e.EndPositionThreshold=.1,e.DeliveryRefreshInterval=6e4,e.DeliveryRefreshRetryCount=5,e.BroadcastEndedIncrement=5e3,e.ReopenedBroadcastInterval=3e4,e.QualityReportThreshold=2,e.BroadcastStreamRetryTimeout=5e3,e.LivePositionTolerance=1,e.BroadcastEndThreshold=1,e.MaxPositionInterpolation=500,e.BufferingTimeoutThreshold=1e3,e.BadSeekThreshold=.1,e.NativePositionFallbackRegion=1,e.CircularLogBufferSize=2048,e.SecondaryContentClass="secondary-content",e.SecondaryPlayerClass="secondaryPlayer",e.SlideDeckId="slideDeck",e.ScreenCaptureClass="screen-capture",e.ObjectVideoTabClass="object-video",e.UrlTabClass="url",e.YouTubeIconClass="youtube",e.SlideDeckTabClass="slide-deck",e.PrimaryTabHeaderClass="primary-header",e.SecondaryTabHeaderClass="secondary-header",e.RecentBroadcastThreshold=144e5,e.UrlEventDuration=.5,e.PlayKeyCode=32,e.RewindKeyCode=37,e.ForwardKeyCode=39,e.VolumeUpKeyCode=38,e.VolumeDownKeyCode=40,e.MuteKeyCode=77,e.VolumeIncrement=10,e.PositionIncrement=5,e.MinVolume=0,e.MaxVolume=100,e.InitialVolume=100,e.SilverlightVersion="4.0.50401.0",e.PlaySpeedSilverlightVersion="5.0",e.QuickRewindSeconds=10,e.QuickForwardSeconds=30,e.FullScreenControlInterval=3,e.EditJumpSeconds=5,e.CaptionMaxLength=256,e.EditorTimelineEndOffsetSeconds=.01,e.DisplayTimePrecisionMultiplier=Math.pow(10,Panopto.Core.Constants.DisplayTimeMillisecondPrecision),e.UrlEventClosenessTolerance=.1,e.BoundaryCutTolerance=.1,e.LeftPaneRatio=.35,e.LeftPaneMinWidth=460,e.RightPaneMinWidth=480,e.HeaderBuffer=60,e.MaxDesktopTitleCharacters=120,e.MaxMobileTitleCharacters=60,e.EventRegionMinHeight=300,e.PlayerMinHeight=50,e.LeftPlayerDefaultHeight=260,e.LiveNotesClass="live-notes",e.MaxInlineSecondaryTabs=3,e.CollapseSecondaryTabsWidth=1200,e.SliderDragThreshold=2,e.InputMargin=14,e.InputOptionsMargin=4,e.ScrollBarWidth=20,e.AudioOnlyMinimumWidth=2,e.ThumbnailScrollTimeout=5e3,e.EventScrollTimeout=5e3,e.FlyoutTimeout=2e3,e.MissingSeekedEventTimeout=5e3,e.BaseUrl=Panopto.uriScheme+"://"+Panopto.webServerFQDN+Panopto.appRoot,e.SessionListUrl=e.BaseUrl+"/Pages/Sessions/List.aspx",e.SilverlightEditorUrlTemplate=e.BaseUrl+"/Pages/Editor/Default.aspx#{0}",e.SlideImageUrl=e.BaseUrl+"/Pages/Viewer/Image.aspx",e.ThumbUrl=e.BaseUrl+"/Pages/Viewer/Thumb.aspx",e.DummyPDFUrl=e.BaseUrl+"/Scripts/PluginDetect/empty.pdf",e.FlashPlayerUrl="http://get.adobe.com/flashplayer",e.SinglePageAppUrl=Panopto.uriScheme+"://"+Panopto.webServerFQDN+Panopto.relativeSinglePageAppUrl,e.QuizEditUrlTemplate=e.SinglePageAppUrl+"quiz-configure/{0}",e.YouTubeEditUrlTemplate=e.SinglePageAppUrl+"youtubeEmbed/configure/{0}",e.YouTubeEmbedBaseUrl="www.youtube.com/embed/",e.HlsLevelFileNames=["index.m3u8","index2.m3u8"],e.JoinChannelOptionValue="joinChannel",e.SearchExpandDuration=400,e.FadeInterval=150,e.PlaySpeedResourceString="ViewerPlus_Speeds_{0}",e.BitrateResourcePrefixString="ViewerPlus_Bitrates_",e.BitrateResourceString=e.BitrateResourcePrefixString+"{0}",e.SearchTypeResourceString="ViewerPlus_Search_{0}",e.BitrateCookie="defaultBitrate",e.MBRBitrateCookie="defaultBitrateMBR",e.VolumeCookie="defaultVolume",e.CaptionsCookie="defaultCaptions",e.CaptionPlacementCookie="defaultCaptionPlacement",e.CaptionSizeCookie="defaultCaptionSize",e.CaptionColorCookie="defaultCaptionColor",e.BitrateLevels=[Panopto.GlobalResources[e.BitrateResourcePrefixString+"Low"],Panopto.GlobalResources[e.BitrateResourcePrefixString+"Medium"],Panopto.GlobalResources[e.BitrateResourcePrefixString+"Medium"],Panopto.GlobalResources[e.BitrateResourcePrefixString+"High"]],e.MaxScormSegments=100,e.ScormCompleteThreshold=.9,e.ScormOffsetMultiplier=5,e.ScormMaxUpdateDelay=30,e.ScormTimeKey="cmi.core.session_time",e.PluginDetectPDFReader="PDFReader",e.SortRelevanceValue="relevance",e.SortTimeValue="time",e.SearchSortOrders=[{value:e.SortRelevanceValue,name:Panopto.GlobalResources.ViewerPlus_SortByRelevance},{value:e.SortTimeValue,name:Panopto.GlobalResources.ViewerPlus_SortByTime}],e.MP4MimeType="video/mp4",e.HLSMimeType="application/x-mpegurl",e.Hive="Hive",e.Kollective="Kollective",e.KollectiveLongPollUrlBase="/api/v1/longpoll?ts={0}&ktoken=",e.LTIPage="/Panopto/LTI/LTI.aspx",e.OutcomeFormat="resultScore={0}&lis_result_sourcedid={1}&oauth_consumer_key={2}&lti_message_type=panopto_outcome_pox_response&lti_version=LTI-1p0",e}();t.Constants=o,function(e){e[e.High=2]="High",e[e.Medium=1]="Medium",e[e.Auto=0]="Auto"}(t.MBRBitrate||(t.MBRBitrate={})),function(e){e[e.Primary=1]="Primary",e[e.Secondary=2]="Secondary",e[e.LiveNotes=3]="LiveNotes"}(t.ViewMode||(t.ViewMode={}));var n=function(){function t(){}return t.getValues=function(e){return Object.keys(e).map(function(t){return e[t]}).filter(function(e){return!isNaN(e)})},t.getNames=function(e){return Object.keys(e).map(function(t){return e[t]}).filter(function(e){return isNaN(e)}).map(function(e){return e.toString()})},t.getNameValuePairs=function(t){return Object.keys(t).map(function(o){return new e.Models.KeyValue(o,t[o])}).filter(function(e){return!isNaN(e.value)})},t}();t.EnumHelpers=n,function(e){e.HttpHeaders={Date:"date",LastModified:"last-modified"}}(o=t.Constants||(t.Constants={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),Panopto.Core.ViewerPlayState=Panopto.Core.ViewerPlayState||{},Panopto.Viewer.PlayState=function(e){return e.Playing=Panopto.Core.ViewerPlayState.Playing,e.Paused=Panopto.Core.ViewerPlayState.Paused,e.Stopped=Panopto.Core.ViewerPlayState.Stopped,e.Buffering=Panopto.Core.ViewerPlayState.Buffering,e}(Panopto.Viewer.PlayState||{}),function(e){!function(e){var t=function(){function t(o,n){var i=this;this.quizzes=o,this.ltiConfig=n,this.completedCallback=new PanoptoCore.TypedCallback,this.closedCallback=new PanoptoCore.TypedCallback,this.results={},this.onQuizCompleted=function(e){i.completedCallback.add(e)},this.onQuizClosed=function(e){i.closedCallback.add(e)},this.completeQuiz=function(e,t,o){var n=_.find(i.quizzes,function(t){return t.id===e});n&&(n.isSessionPlaybackBlocking=!1,i.ltiConfig&&i.recordResult(e,t,o),i.completedCallback.fire(n))},this.reportQuizResults=function(e,t,o){_.find(i.quizzes,function(t){return t.id===e})&&i.ltiConfig&&i.recordResult(e,t,o)},this.closeQuiz=function(e){var t=_.find(i.quizzes,function(t){return t.id===e});i.closedCallback.fire(t)},this.recordResult=function(t,o,n){if(_.isNumber(o)&&_.isNumber(n)){i.results[t]={correct:o,questions:n};var a=_.values(i.results);if(!_.contains(a,null)){var r=_.reduce(a,function(e,t){return{correct:e.correct+t.correct,questions:e.questions+t.questions}}),s=Panopto.Core.StringHelpers.format(e.Constants.OutcomeFormat,r.correct/r.questions,i.ltiConfig.outcomeId,i.ltiConfig.oauthConsumerKey);$.ajax({type:"GET",url:e.Constants.LTIPage,data:s,error:function(e){window.console&&console.log(e)}})}}},t.instance=this,_.each(o,function(e){i.results[e.id]=null})}return t.getInstance=function(){return t.instance},t}();e.QuizResultsController=t}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=PanoptoCore.VoidCallback,o=function(){function e(e,o,n,i){this.blocked=e,this.learnMoreUrl=o,this.signupUrl=n,this.resources=i,this._onDismiss=new t}return Object.defineProperty(e.prototype,"onDismiss",{get:function(){return this._onDismiss},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this;this.dialogTitle=this.blocked?this.resources.QuotaDialog_Title_Anonymous_OverQuota:this.resources.QuotaDialog_Title_Anonymous,this.dialogInstructions=this.blocked?this.resources.QuotaDialog_Instructions_Anonymous_OverQuota:this.resources.QuotaDialog_Instructions_Anonymous,this.element=$(e.template(this)),this.blocked||Panopto.Core.UI.Handlers.button(this.element.find(".quota-dialog-dismiss"),function(){t._onDismiss.fire()})},e.prototype.getElement=function(){return this.element},e.template=_.template("\n            <div class='quota-anonymous-dialog quota-dialog'>\n                <div class='quota-dialog-header'><@- dialogTitle @></div>\n                <div class='quota-dialog-instructions'><@- dialogInstructions @></div>\n                <div class='quota-dialog-marketing-header'><@- resources.QuotaDialog_Marketing_Header @></div>\n                <div class='quota-dialog-marketing-features'>\n                    <div class='quota-dialog-marketing-feature'>\n                        <div class='quota-dialog-marketing-icon marketing-record'></div>\n                        <div class='quota-dialog-marketing-text'><@- resources.QuotaDialog_Marketing_Record @></div>\n                    </div>\n                    <div class='quota-dialog-marketing-feature'>\n                        <div class='quota-dialog-marketing-icon marketing-share'></div>\n                        <div class='quota-dialog-marketing-text'><@- resources.QuotaDialog_Marketing_Share @></div>\n                    </div>\n                    <div class='quota-dialog-marketing-feature'>\n                        <div class='quota-dialog-marketing-icon marketing-search'></div>\n                        <div class='quota-dialog-marketing-text'><@- resources.QuotaDialog_Marketing_Search @></div>\n                    </div>\n                </div>\n                <div class='quota-dialog-buttons'>\n                    <a href='<@- learnMoreUrl @>' target='<@- blocked ? \"_self\" : \"_blank\" @>' class='quota-dialog-button'>\n                        <@= resources.QuotaDialog_LearnMore @>\n                    </a>\n                    <a href='<@- signupUrl @>' target='<@- blocked ? \"_self\" : \"_blank\" @>' class='quota-dialog-button safety-background'>\n                        <@- resources.QuotaDialog_SignUp @>\n                    </a>\n                </div>\n                <@ if (!blocked) { @>\n                    <div class='quota-dialog-links'>\n                        <a class='quota-dialog-dismiss' href='#'><@- resources.QuotaDialog_NotNow @></a>\n                    </div>\n                <@ } @>\n            </div>\n        "),e}();e.AnonymousUserDialog=o}(e.QuotaPlaybackModalDialogs||(e.QuotaPlaybackModalDialogs={}))}(e.Controls||(e.Controls={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=function(){function e(e){this.resources=e}return e.prototype.render=function(){this.element=$(e.template(this)),Panopto.Core.UI.Handlers.button(this.element.find(".upgrade-link-dialog"),function(){Panopto.features.recurlyEnabled?Panopto.ProUpgradePopup():window.open("https://www.panopto.com/features/","_blank")})},e.prototype.getElement=function(){return this.element},e.template=_.template("\n            <div class='quota-owner-dialog quota-dialog'>\n                <div class='quota-dialog-header'><@- resources.QuotaDialog_Title_Owner @></div>\n                <div><@- resources.QuotaDialog_Instructions_Owner @></div>\n                <div class='quota-dialog-buttons upgrade-link-dialog'>\n                    <a class='quota-dialog-button safety-background'>\n                        <@- resources.QuotaDialog_Upgrade @>\n                    </a>\n                </div>\n            </div>\n        "),e}();e.OwnerDialog=t}(e.QuotaPlaybackModalDialogs||(e.QuotaPlaybackModalDialogs={}))}(e.Controls||(e.Controls={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=function(){function e(e){this.resources=e}return e.prototype.render=function(){this.element=$(e.template(this))},e.prototype.getElement=function(){return this.element},e.template=_.template("\n            <div class='quota-viewer-dialog quota-dialog'>\n                <div class='quota-dialog-header'><@- resources.QuotaDialog_Title_Viewer @></div>\n                <div><@- resources.QuotaDialog_Instructions_Viewer @></div>\n            </div>\n        "),e}();e.ViewerDialog=t}(e.QuotaPlaybackModalDialogs||(e.QuotaPlaybackModalDialogs={}))}(e.Controls||(e.Controls={}))}(PanoptoTS||(PanoptoTS={})),(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.ScormData=function(e,t){var o,n,i=PanoptoTS.Viewer.Constants,a=[],r=0,s=0,l=0,c=function(){return r/e>i.ScormCompleteThreshold};if(window.console&&console.log(t),t&&(o=t.split("t"))[0].length===e){for(n=0;n<e;n++)a[n]=o[0].charAt(n),r+="x"===a[n]?1:0;l=parseFloat(o[1])||0}if(!a.length)for(n=0;n<e;n++)a[n]=" ";return{serialize:function(e){return a.join("")+"t"+e},markProgress:function(e){return e=Math.min(a.length,e),"x"!==a[e]&&(a[e]="x",r++,s++,!0)},segmentsWatched:function(){return r},completed:c,shouldUpdateSegments:function(e){return c()||s>=10||s*e>=i.ScormMaxUpdateDelay},shouldUpdatePosition:function(e,t,o,n){return Math.abs(e-t)>Math.min(i.ScormOffsetMultiplier*o,i.ScormMaxUpdateDelay)||e===n},lastPosition:function(){return l},onPositionUpdated:function(){s=0}}},Panopto.Viewer.ScormControl=function(e,t){var o,n=PanoptoTS.Viewer.Constants,i=Math.min(Math.ceil(t),n.MaxScormSegments),a=t/i,r=0,s=0,l=function(t){if(-1!==window.location.search.indexOf("scormlog=true")){var o=new Date;console.log("percentCompleted: "+t+" at time: "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"."+o.getMilliseconds())}e.reportPercentCompleted(t)};try{var c=(o=Panopto.Viewer.ScormData(i,SD.GetBookmark())).lastPosition();c&&(e.position(c||0),s=c);var u=o.segmentsWatched();return r=u*a,l(100*c/t),{updateProgress:function(e){if(0!==e||0===s){var i=o.markProgress(Math.floor(e/a));if(i&&o.shouldUpdateSegments(a)||o.shouldUpdatePosition(e,s,a,t))try{SD.SetBookmark(o.serialize(e)),SD.LMSSetValue(n.ScormTimeKey,Math.floor(1e3*(o.segmentsWatched()*a-r))),i&&o.completed()&&SD.SetReachedEnd(),SD.CommitData(),o.onPositionUpdated(),s=e,l(100*e/t)}catch(e){}}}}}catch(e){}},Panopto.Viewer.Players=Panopto.Viewer.Players||{},function(e){!function(t){var o,n;o=t.Data||(t.Data={}),n=function(){function o(t){var o=Panopto.Viewer.Data,n=e.Viewer.Constants,i=t.Delivery.SessionName,a=Panopto.Core.TimeHelpers.formatWin32EpochTimeToDate(t.Delivery.SessionStartTime),r=t.Delivery.IsActiveBroadcast,s=t.Delivery.IsBroadcast&&t.Delivery.IsViewerEncodeComplete&&(new Date).getTime()-a.getTime()<=n.RecentBroadcastThreshold,l=this.parseStreams(t.Delivery.Streams,i,r),c=l.primaryStreams,u=l.secondaryStreams,d=l.activePrimary,p=l.screenCaptureStream,A=this.parsePlayerInfo(c,d,r),h=A.multiBitrateEnabled,y=A.playSpeedEnabled,f=A.flowPlayerEnabled,g=A.requiresSilverlight,m=this.parseEvents(t.Delivery.Timestamps,t.Delivery.EventTargets,t.Delivery.PublicNotesStreams,t.Delivery.Duration,p),v=m.slides,P=m.documents,b=m.thumbnails,w=m.contents,C=m.channels;this.title=i,this.id=t.Delivery.PublicID,this.date=a,this.duration=t.Delivery.Duration,this.description=t.Delivery.SessionAbstract,this.ownerId=t.Delivery.OwnerId,this.ownerIsOverQuota=t.Delivery.OwnerIsOverQuota,this.invocationId=t.InvocationId,this.embedUrl=t.EmbedUrl,this.downloadUrl=t.DownloadUrl,this.podcastCompleted=t.PodcastCompleted,this.broadcastRefreshInterval=1e3*t.BroadcastRefreshInterval,this.broadcastSegmentBackoff=t.BroadcastSegmentBackoff,this.allowPublicNotes=t.AllowPublicNotes,this.hasAnyLinks=t.Delivery.HasAnyLinks,this.hasCaptions=t.Delivery.HasCaptions,this.isBroadcast=r,this.isViewable=r&&d||t.Delivery.IsViewerEncodeComplete,this.isReadyForEditing=t.Delivery.IsReadyForEditing,this.RehydrationAvailable=t.Delivery.RehydrationAvailable,this.isPurgedEncode=t.Delivery.IsPurgedEncode,this.isPurgedLegacyEncode=t.Delivery.IsPurgedLegacyEncode,this.requiresAdvancedEditor=t.Delivery.RequiresAdvancedEditor,this.broadcastEnded=t.Delivery.BroadcastEnded,this.broadcastInterrupted=t.Delivery.BroadcastInterrupted,this.isRecentBroadcast=s,this.isPrimaryAudioOnly=t.Delivery.IsPrimaryAudioOnly,this.requiresSilverlight=g,this.flowPlayerEnabled=f,this.multiBitrateEnabled=h,this.playSpeedEnabled=y,this.discussionEnabled=t.Delivery.DiscussionEnabled,this.discussionCacheSeconds=t.DiscussionCacheSeconds,this.lastViewingPosition=t.LastViewingPosition,this.completionPercentage=t.CompletionPercentage,this.activePrimary=d,this.primaryStreams=c,this.secondaryStreams=u,this.slideDecks=v.length?[o.SlideDeck(v)]:[],this.documents=P,this.thumbnails=b,this.captions=[],this.contents=w,this.channels=C,this.user={email:t.UserEmail,name:t.UserName,key:(t.UserKey||"").toLowerCase(),rating:t.UserRating,role:t.SessionRole,canCreateQuestionLists:t.UserCanCreateQuestionLists},this.folder={name:t.Delivery.SessionGroupLongName,description:t.Delivery.SessionGroupAbstract,id:t.Delivery.SessionGroupPublicID},this.nextDelivery=void 0,t.Delivery.NextDeliveryUrl&&(this.nextDelivery={id:t.Delivery.NextDeliveryId,url:t.Delivery.NextDeliveryUrl,title:t.Delivery.NextDeliveryTitle,description:t.Delivery.NextDeliveryDescription,duration:Panopto.Core.TimeHelpers.formatDuration(t.Delivery.NextDeliveryDuration,Panopto.GlobalResources.TimeSeparator),thumbUrl:t.Delivery.NextDeliveryThumbUrl,isLive:t.Delivery.NextDeliveryIsLive,folderName:void 0}),this.serverModel=t}return o.prototype.parseStreams=function(e,o,n){var i=_.map(_.filter(e,function(e){return"Archival"===e.StreamTypeName}),function(e){return Panopto.Viewer.Data.Stream(e,n,o)}),a=(i=_.sortBy(i,"relativeStart")).length?n?_.find(i,function(e){return!e.relativeEnd})||_.max(i,function(e){return e.relativeEnd}):i[0]:void 0,r=n?i:a?[a]:[],s=_.map(_.filter(e,function(e){return"Archival"!==e.StreamTypeName}),function(e){return Panopto.Viewer.Data.Stream(e,n,o)});return{primaryStreams:r,secondaryStreams:s,activePrimary:a,screenCaptureStream:_.find(s,function(e){return e.tabClass===t.Constants.ScreenCaptureClass})}},o.prototype.parsePlayerInfo=function(e,o,n){var i=!!o&&_.contains(["ism","wmv"],o.fileType),a=!new RegExp(Panopto.features.hlsFlashFallbackRegex).test(navigator.userAgent)&&!Panopto.Core.Browser.isWin7IE11&&_.any(flowplayer.engines,function(e){return"hlsjs"===e.engineName||"hlsjs-lite"===e.engineName}),r=Panopto.Core.Browser.supportsVideo(t.Constants.MP4MimeType),s=(!e.length||"hls"===o.fileType)&&a||(!e.length||"mp4"===o.fileType)&&r,l=Panopto.viewer.flowplayerEnabled&&!i&&s,c=!1;o&&(c="ism"===o.fileType||"hls"===o.fileType&&(l||Panopto.Core.Browser.flashEnabled()));var u=!1;return!n&&o&&(u=l||"mp4"===o.fileType&&r||"hls"===o.fileType&&o.httpUrl&&r||"wmv"===o.fileType&&!Panopto.Core.Browser.isWebkit),{multiBitrateEnabled:c,playSpeedEnabled:u,flowPlayerEnabled:l,requiresSilverlight:i}},o.prototype.parseEvents=function(t,o,n,i,a){var r=Panopto.Viewer.Data,s=_.filter(t,function(e){return(e.Time||0===e.Time)&&e.Time<=i&&e.ObjectIdentifier&&e.ObjectSequenceNumber}),l=_.filter(s,function(e){return"PowerPoint"===e.EventTargetType}),c=_.filter(s,function(e){return e.Url}),u=[];_.each(c,function(t){return u.push(new e.Viewer.Data.Document(t))}),_.each(o,function(t){return u.push(new e.Viewer.Data.Document(t))});var d=_.filter(s,function(e){return!e.Url&&_.contains(["ObjectVideo","Primary"],e.EventTargetType)}).concat(l);d.sort(function(e,t){return e.Time-t.Time});var p,A=_.map(d,function(t){return new e.Viewer.Data.Thumbnail(t,a)}),h=_.chain(d.concat(c)).unique().map(function(t){return new e.Viewer.Data.Event(t)}).filter(function(e){return!!jQuery.trim(e.text)}).value();return n&&(p=_.map(n,function(e){return r.Channel(e,e,!0)})),{slides:l,documents:u,thumbnails:A,contents:h,channels:p}},o}(),o.Delivery=n}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.Data=Panopto.Viewer.Data||{},Panopto.Viewer.Data.Stream=function(e,t,o){var n,i=[],a=[],r=e.Name||("SCREEN"===e.Tag?Panopto.GlobalResources.ViewerPlus_ScreenCaptureTitle:Panopto.GlobalResources.ViewerPlus_ObjectVideoTitle),s="SCREEN"===e.Tag?PanoptoTS.Viewer.Constants.ScreenCaptureClass:PanoptoTS.Viewer.Constants.ObjectVideoTabClass,l=function(e,o){var n=e-PanoptoTS.Viewer.Constants.SecondaryStreamOffset;return t?e:o&&n<=o+PanoptoTS.Viewer.Constants.MinSegmentGap?e:Math.max(0,n)};switch(e.RelativeSegments&&e.RelativeSegments.length?_.each(e.RelativeSegments,function(e,t){var o=new PanoptoTS.Viewer.Data.SecondarySegment(e),n=a[t-1];o.timelineStart=l(o.relativeStart,n?n.relativeEnd:0),a.push(o),i.push(o.timelineStart,o.relativeEnd)}):(i.push(l(e.RelativeStart,void 0)),e.RelativeEnd&&i.push(e.RelativeEnd)),(n=PanoptoTS.Viewer.Data.ContentHelpers.createBaseContent(r,e.PublicID,s,i,e.AbsoluteStart,"","",!1,!1,!1,t,!1)).url=e.StreamUrl,n.httpUrl=e.StreamHttpUrl,n.fileType=e.ViewerMediaFileTypeName,n.relativeStart=e.RelativeStart,n.relativeEnd=e.RelativeEnd,n.length=e.RelativeEnd?e.RelativeEnd-e.RelativeStart:0,n.segments=a,n.interrupted=e.Interrupted,n.editFileType=e.EditMediaFileTypeName,n.deliveryTitle=o,n.broadcastSegmentDuration=e.BroadcastSegmentDuration,n.broadcastSegmentBackoff=e.BroadcastSegmentBackoff||Panopto.viewer.broadcastSegmentBackoff,n.vrType=e.VRType,e.Tag){case"AUDIO":n.type=Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Audio,n.isAudioOnly=!0;break;case"SCREEN":n.type=Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Screen,n.isAudioOnly=!1;break;default:n.type=Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Camera,n.isAudioOnly=!1}return n.optimizationToken=e.OptimizationToken,n},function(e){!function(e){!function(e){var t=function(e){this.relativeStart=e.RelativeStart,this.relativeEnd=e.End?e.RelativeStart+(e.End-e.Start):1/0,this.streamOffset=e.Start};e.SecondarySegment=t}(e.Data||(e.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.prototype.getStreamFriendlyType=function(){var e;switch(this.type){case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Audio:e=Panopto.GlobalResources.ViewerPlus_AudioTitle;break;case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Screen:case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Slide:e=Panopto.GlobalResources.ViewerPlus_ScreenCaptureTitle;break;case Panopto.Core.ServiceInterface.Rest.Objects.StreamContentType.Camera:default:e=Panopto.GlobalResources.ViewerPlus_ObjectVideoTitle}return e},e.prototype.getStreamName=function(){return this.name||this.getStreamFriendlyType()},e.convertFromApiModel=function(t){var o=new e;return o.id=t.id,o.url=t.url,o.httpUrl=t.httpUrl,o.absoluteStart=t.absoluteStart,o.duration=t.duration,o.thumbnailUrlBase=t.thumbnailUrlBase,o.thumbnailInterval=t.thumbnailInterval,o.type=t.type,o.vrType=t.vrType,o.name=t.name,o.iconCode=t.iconCode,o.absoluteEnd=t.absoluteEnd(),o.streamType=t.isPrimary?1:2,o},e}();e.Stream=t}(e.Data||(e.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=function(){function e(){}return e.getBlockingContent=function(e,t){return _.find(e,function(e){var o=e.timeline[0];return e.isSessionPlaybackBlocking&&o<=t})},e.getPausingContent=function(e,t,o){return _.find(e,function(e){var n=e.timeline[0];return e.pauseWhenAvailable&&n>t&&n<=o})},e}();e.ContentLogic=t}(e.Logic||(e.Logic={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.Data=Panopto.Viewer.Data||{},Panopto.Viewer.Data.Channel=function(e,t,o){return{value:e,name:t||e,isUser:o}},(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.Data=Panopto.Viewer.Data||{},function(e){!function(e){!function(e){var t=function(){function e(){}return e.createBaseContent=function(e,t,o,n,i,a,r,s,l,c,u,d){var p=(n=n||[])[0];return{title:e,id:t,tabClass:o,iconClass:a,iconCode:r,timeline:n,relativeStartTime:p,absoluteStartTime:i=i||p,hiddenTab:s,pauseWhenAvailable:l,isSessionPlaybackBlocking:c,isBroadcast:u,isSecondaryPaneOnly:d}},e}();e.ContentHelpers=t}(e.Data||(e.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(t){!function(t){var o=function(){function t(e){var t=e.Url||e.URL;if(t){t=window.location.protocol+"//"+t.replace(/^.*?:\/\//,"")}var o="number"!=typeof e.Time,n=this.constructBaseObject(e,t,o);_.extend(this,n),this.url=t,this.isPdf=o,this.isQuiz=e.IsQuestionList}return t.prototype.constructBaseObject=function(t,o,n){var i=t.Caption||(t.FileName?decodeURIComponent(t.FileName):Panopto.GlobalResources.ViewerPlus_Website),a=t.ID||t.PublicId||t.PublicID,r=[];n?r.push(0):(r.push(t.Time),r.push(t.Time+e.Viewer.Constants.UrlEventDuration));var s=-1!==o.indexOf(e.Viewer.Constants.YouTubeEmbedBaseUrl),l=n?Panopto.Core.Constants.DocumentIconCode:t.IsQuestionList?Panopto.Core.Constants.QuestionListIconCode:s?void 0:Panopto.Core.Constants.LinkIconCode,c=s?e.Viewer.Constants.YouTubeIconClass:void 0;return e.Viewer.Data.ContentHelpers.createBaseContent(i,a,n?"pdf":e.Viewer.Constants.UrlTabClass,r,void 0,c,l,t.IsQuestionList,!n,t.IsSessionPlaybackBlocking,!1,!0)},t}();t.Document=o}(t.Data||(t.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),function(e){!function(e){!function(e){var t=function(e){var t=e.EventTargetType||"UserCreatedTranscript",o=e.ID||e.EventID,n=o||e.PublicId!==Panopto.Core.Constants.EmptyGuid&&e.PublicId,i=n?"event"+n:(t+"-"+e.Time).replace(/\./gi,""),a=_.contains(["Transcript","UserCreatedTranscript"],t),r=_.contains(["ObjectVideo","Primary","PowerPoint"],t),s=a?e.Data||e.Caption:r?e.Caption:e.Caption||e.Data,l=(e.UserName||"").toLowerCase(),c=t.replace(" ","");"Questions"===c&&(c="Comments"),this.id=i,this.eventId=o,this.eventPublicId=e.PublicId,this.sessionId=e.SessionID,this.time=e.Time,this.creationTime=e.CreationTime,this.text=s,this.user=l,this.userDisplayName=e.UserDisplayName||l,this.type=c,this.isQuestionList=e.IsQuestionList,this.saved=!0,this.createdDuringWebcast="Comments"===c&&e.CreatedDuringWebcast,this.url=e.Url};e.Event=t}(e.Data||(e.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={})),(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.Data=Panopto.Viewer.Data||{},Panopto.Viewer.Data.Slide=function(e){return{time:e.Time,absoluteTime:e.AbsoluteTime,queryParams:{id:e.ObjectIdentifier,number:e.ObjectSequenceNumber,x:void 0}}},(Panopto=Panopto||{}).Viewer=Panopto.Viewer||{},Panopto.Viewer.Data=Panopto.Viewer.Data||{},Panopto.Viewer.Data.SlideDeck=function(e){var t=_.map(e,Panopto.Viewer.Data.Slide);t[0].time=0;var o=[t[0].time],n=PanoptoTS.Viewer.Data.ContentHelpers.createBaseContent(Panopto.GlobalResources.ViewerPlus_SlidesTitle,PanoptoTS.Viewer.Constants.SlideDeckId,PanoptoTS.Viewer.Constants.SlideDeckTabClass,o,t[0].absoluteTime,"","",!1,!1,!1,!1,!1);return n.slides=t,n},function(e){!function(t){!function(t){var o=function(t,o){this.time=t.Time,this.text=t.Caption,this.queryParams={eventTargetPID:t.ObjectPublicIdentifier,sessionPID:t.SessionID,number:t.ObjectSequenceNumber,isPrimary:"Primary"===t.EventTargetType,absoluteTime:t.AbsoluteTime},this.isSlide="PowerPoint"===t.EventTargetType,t.ObjectStreamID!==Panopto.Core.Constants.EmptyGuid?this.tabId=t.ObjectStreamID:this.isSlide&&(this.tabId=o?o.id:e.Viewer.Constants.SlideDeckId)};t.Thumbnail=o}(t.Data||(t.Data={}))}(e.Viewer||(e.Viewer={}))}(PanoptoTS||(PanoptoTS={}));
//# sourceMappingURL=file://seasyn/tfsbuilds/panopto_core_rel-rtc-7.11.0_x64/20191114.11/_PublishedWebsites/WebUI/Scripts/Panopto/Bundles/Embed.js.map
